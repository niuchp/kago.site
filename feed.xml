<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.6.2">Jekyll</generator><link href="https://kago.site/feed.xml" rel="self" type="application/atom+xml" /><link href="https://kago.site/" rel="alternate" type="text/html" /><updated>2017-12-11T09:18:57+08:00</updated><id>https://kago.site/</id><title type="html">阅后即忘</title><subtitle>Barry New的博客</subtitle><author><name>Barry New</name></author><entry><title type="html">markdown语法</title><link href="https://kago.site/2017/12/10/markdown-grammar/" rel="alternate" type="text/html" title="markdown语法" /><published>2017-12-10T00:00:00+08:00</published><updated>2017-12-10T00:00:00+08:00</updated><id>https://kago.site/2017/12/10/markdown-grammar</id><content type="html" xml:base="https://kago.site/2017/12/10/markdown-grammar/">&lt;h1 id=&quot;markdown-plus&quot;&gt;Markdown Plus&lt;/h1&gt;

&lt;p&gt;Markdown Plus (“M+” or “mdp” for short) is a markdown editor with extra features.&lt;/p&gt;

&lt;h2 id=&quot;apps&quot;&gt;Apps&lt;/h2&gt;

&lt;p&gt;We currently &lt;strong&gt;&lt;em&gt;don’t&lt;/em&gt;&lt;/strong&gt; accept donations.
The best way to support our development is to buy our apps.&lt;/p&gt;

&lt;h3 id=&quot;markdown-plus-1&quot;&gt;Markdown Plus&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;http://tylingsoft.com/markdown-plus/&quot;&gt;&lt;img src=&quot;http://tylingsoft.com/img/mdp/icon.png&quot; height=&quot;64px&quot; /&gt;&lt;/a&gt;
&lt;a href=&quot;http://tylingsoft.com/markdown-plus/&quot;&gt;Markdown Plus&lt;/a&gt; is available for both OS X and Windows. You get every feature of the web version plus lots of advanced features.&lt;/p&gt;

&lt;h3 id=&quot;markdown-mate&quot;&gt;Markdown Mate&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;http://tylingsoft.com/markdown-mate/&quot;&gt;&lt;img src=&quot;http://tylingsoft.com/img/mdm/icon.png&quot; height=&quot;64px&quot; /&gt;&lt;/a&gt;
&lt;a href=&quot;http://tylingsoft.com/markdown-mate/&quot;&gt;Markdown Mate&lt;/a&gt; is a markdown previewer, it’s not going to replace your favorite editor but handles everything about markdown.&lt;/p&gt;

&lt;p&gt;::: success
We provide email support to those who have purchased the apps: &lt;strong&gt;service@tylingsoft.com&lt;/strong&gt;
:::&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;table-of-contents&quot;&gt;Table of Contents&lt;/h1&gt;

&lt;p&gt;[toc]&lt;/p&gt;

&lt;p&gt;Note: Only &lt;code class=&quot;highlighter-rouge&quot;&gt;h2&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;h3&lt;/code&gt; are shown in toc.&lt;/p&gt;

&lt;h2 id=&quot;mastering-markdown&quot;&gt;Mastering Markdown&lt;/h2&gt;

&lt;p&gt;Markdown allows you to write using an easy-to-read, easy-to-write plain text format, which then converts to valid &lt;abbr title=&quot;Hyper Text Markup Language&quot;&gt;HTML&lt;/abbr&gt; for viewing.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://guides.github.com/features/mastering-markdown/&quot;&gt;Mastering Markdown Guide&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;strikethrough&quot;&gt;&lt;del&gt;strikethrough&lt;/del&gt;&lt;/h2&gt;

&lt;h2 id=&quot;insert&quot;&gt;++insert++&lt;/h2&gt;

&lt;h2 id=&quot;mark&quot;&gt;==mark==&lt;/h2&gt;

&lt;h2 id=&quot;subscript-h2o&quot;&gt;Subscript: H~2~O&lt;/h2&gt;

&lt;p&gt;You can also use inline math: &lt;code class=&quot;highlighter-rouge&quot;&gt;$H_2O$&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;superscript-29th&quot;&gt;Superscript: 29^th^&lt;/h2&gt;

&lt;p&gt;You can also use inline math: &lt;code class=&quot;highlighter-rouge&quot;&gt;$29^{th}$&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;emoji-panda_face-sparkles-camel-boom-pig&quot;&gt;Emoji: :panda_face: :sparkles: :camel: :boom: :pig:&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://www.emoji-cheat-sheet.com/&quot;&gt;Emoji Cheat Sheet&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;fontawesome-fa-cab-fa-flag-fa-bicycle-fa-leaf-fa-heart&quot;&gt;Fontawesome: :fa-cab: :fa-flag: :fa-bicycle: :fa-leaf: :fa-heart:&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://fontawesome.io/icons/&quot;&gt;All the Font Awesome icons&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;print-hello-code&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;print 'hello code'&lt;/code&gt;&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;evens = [1, 2, 3, 4, 5].collect do |item|
  item * 2
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ready&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'pre code'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;hljs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;highlightBlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://help.github.com/articles/markdown-basics/#code-formatting&quot;&gt;Code Formatting&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;tables-and-alignment&quot;&gt;Tables and alignment&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;First Header&lt;/th&gt;
      &lt;th&gt;Second Header&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Content from cell 1&lt;/td&gt;
      &lt;td&gt;Content from cell 2&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Content in the first column&lt;/td&gt;
      &lt;td&gt;Content in the second column&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Left-Aligned&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Center Aligned&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;Right Aligned&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;col 3 is&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;some wordy text&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;$1600&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;col 2 is&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;centered&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;$12&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;a href=&quot;https://help.github.com/articles/github-flavored-markdown/#tables&quot;&gt;Table Syntax&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;task-list&quot;&gt;Task list&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;[ ] a bigger project
    &lt;ul&gt;
      &lt;li&gt;[x] first subtask&lt;/li&gt;
      &lt;li&gt;[x] follow up subtask&lt;/li&gt;
      &lt;li&gt;[ ] final subtask&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;[ ] a separate task&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;https://help.github.com/articles/writing-on-github/#task-lists&quot;&gt;Task List Syntax&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;abbreviation&quot;&gt;Abbreviation&lt;/h2&gt;

&lt;p&gt;Markup is based on &lt;a href=&quot;https://michelf.ca/projects/php-markdown/extra/#abbr&quot;&gt;php markdown extra&lt;/a&gt; definition, but without multiline support:&lt;/p&gt;

&lt;p&gt;The &lt;abbr title=&quot;Hyper Text Markup Language&quot;&gt;HTML&lt;/abbr&gt; specification
is maintained by the &lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/abbr&gt;.&lt;/p&gt;

&lt;h2 id=&quot;footnote&quot;&gt;Footnote&lt;/h2&gt;

&lt;p&gt;Here is a footnote reference,&lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; and another.&lt;sup id=&quot;fnref:longnote&quot;&gt;&lt;a href=&quot;#fn:longnote&quot; class=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;Here is an inline note.^[Inlines notes are easier to write, since
you don’t have to pick an identifier and move down to type the
note.]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://pandoc.org/README.html#footnotes&quot;&gt;Footnote Syntax&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;mathematical-formula-y--x2&quot;&gt;Mathematical formula &lt;code class=&quot;highlighter-rouge&quot;&gt;$y = x^2$&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;Inline math: &lt;code class=&quot;highlighter-rouge&quot;&gt;$\dfrac{ \tfrac{1}{2}[1-(\tfrac{1}{2})^n] }{ 1-\tfrac{1}{2} } = s_n$&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Math block:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-katex&quot;&gt;\oint_C x^3\, dx + 4y^2\, dy

2 = \left(
 \frac{\left(3-x\right) \times 2}{3-x}
 \right)

\sum_{m=1}^\infty\sum_{n=1}^\infty\frac{m^2\,n}
 {3^m\left(m\,3^n+n\,3^m\right)}

\phi_n(\kappa) =
 \frac{1}{4\pi^2\kappa^2} \int_0^\infty
 \frac{\sin(\kappa R)}{\kappa R}
 \frac{\partial}{\partial R}
 \left[R^2\frac{\partial D_n(R)}{\partial R}\right]\,dR
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&quot;http://meta.wikimedia.org/wiki/Help:Displaying_a_formula&quot;&gt;Mathematical Formula Syntax&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;asciimath&quot;&gt;AsciiMath&lt;/h2&gt;

&lt;p&gt;Inline AsciiMath: &lt;code class=&quot;highlighter-rouge&quot;&gt;@(1/2[1-(1/2)^n])/(1-(1/2))=s_n@&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-AsciiMath&quot;&gt;oint_Cx^3 dx+4y^2 dy

2=(((3-x)xx2)/(3-x))

sum_(m=1)^oosum_(n=1)^oo(m^2 n)/(3^m(m3^n+n3^m)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&quot;language-ASCIIMath&quot;&gt;phi_n(kappa) = 1/(4pi^2 kappa^2)
 int_0^oo (sin(kappa R))/(kappa R)
 del/(del R)
[R^2 (del D_n (R))/(del R)] del R
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&quot;http://asciimath.org/&quot;&gt;AsciiMath Documentation&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;mermaid-charts&quot;&gt;mermaid charts&lt;/h2&gt;

&lt;h3 id=&quot;flowchart&quot;&gt;Flowchart&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-mermaid&quot;&gt;graph TD
A[Christmas] --&amp;gt;|Get money| B(Go shopping)
B --&amp;gt; C{Let me think}
C --&amp;gt;|One| D[Laptop]
C --&amp;gt;|Two| E[iPhone]
C --&amp;gt;|Three| F[Car]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&quot;http://knsv.github.io/mermaid/#flowcharts-basic-syntax&quot;&gt;Flowchart Syntax&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;::: warning
Adding many flowcharts will slow down the editor.
:::&lt;/p&gt;

&lt;h3 id=&quot;sequence-diagram&quot;&gt;Sequence diagram&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-mermaid&quot;&gt;sequenceDiagram
loop every day
    Alice-&amp;gt;&amp;gt;John: Hello John, how are you?
    John--&amp;gt;&amp;gt;Alice: Great!
end
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&quot;http://knsv.github.io/mermaid/#sequence-diagrams&quot;&gt;Sequence Diagram Syntax&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;::: warning
Adding many sequence diagrams will slow down the editor.
:::&lt;/p&gt;

&lt;h3 id=&quot;gantt-diagram&quot;&gt;Gantt diagram&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-mermaid&quot;&gt;gantt
dateFormat  YYYY-MM-DD
title Adding GANTT diagram to mermaid

section A section
Completed task            :done,    des1, 2014-01-06,2014-01-08
Active task               :active,  des2, 2014-01-09, 3d
Future task               :         des3, after des2, 5d
Future task2               :         des4, after des3, 5d

section Critical tasks
Completed task in the critical line :crit, done, 2014-01-06,24h
Implement parser and jison          :crit, done, after des1, 2d
Create tests for parser             :crit, active, 3d
Future task in critical line        :crit, 5d
Create tests for renderer           :2d
Add to mermaid                      :1d

section Documentation
Describe gantt syntax               :active, a1, after des1, 3d
Add gantt diagram to demo page      :after a1  , 20h
Add another diagram to demo page    :doc1, after a1  , 48h

section Last section
Describe gantt syntax               :after doc1, 3d
Add gantt diagram to demo page      : 20h
Add another diagram to demo page    : 48h
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&quot;http://knsv.github.io/mermaid/#gant-diagrams&quot;&gt;Gantt Diagram Syntax&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;::: warning
Adding many gantt diagrams will slow down the editor.
:::&lt;/p&gt;

&lt;h3 id=&quot;class-diagram&quot;&gt;Class diagram&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-mermaid&quot;&gt;classDiagram
Class01 &amp;lt;|-- AveryLongClass : Cool
Class03 *-- Class04
Class05 o-- Class06
Class07 .. Class08
Class09 --&amp;gt; C2 : Where am i?
Class09 --* C3
Class09 --|&amp;gt; Class07
Class07 : equals()
Class07 : Object[] elementData
Class01 : size()
Class01 : int chimp
Class01 : int gorilla
Class08 &amp;lt;--&amp;gt; C2: Cool label
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Class diagram is powered by &lt;a href=&quot;https://github.com/knsv/mermaid&quot;&gt;mermaid&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;::: warning
Adding many class diagrams will slow down the editor.
:::&lt;/p&gt;

&lt;h2 id=&quot;custom-container&quot;&gt;Custom Container&lt;/h2&gt;

&lt;p&gt;Markup is similar to fenced code blocks. Valid container types are &lt;code class=&quot;highlighter-rouge&quot;&gt;success&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;info&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;warning&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;danger&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;::: info
You have new mail.
:::&lt;/p&gt;

&lt;p&gt;::: danger
Staying up all night is bad for health.
:::&lt;/p&gt;

&lt;h2 id=&quot;definition-list&quot;&gt;Definition list&lt;/h2&gt;

&lt;p&gt;Term 1
  ~ Definition 1&lt;/p&gt;

&lt;p&gt;Term 2
  ~ Definition 2a
  ~ Definition 2b&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://pandoc.org/README.html#definition-lists&quot;&gt;Definition List Syntax&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;html&quot;&gt;&lt;abbr title=&quot;Hyper Text Markup Language&quot;&gt;HTML&lt;/abbr&gt;&lt;/h2&gt;

&lt;p&gt;If you find the markdown syntax too limited, you can try some &lt;span style=&quot;color: blue;&quot;&gt;&lt;abbr title=&quot;Hyper Text Markup Language&quot;&gt;HTML&lt;/abbr&gt;&lt;span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p style=&quot;text-align:center;&quot;&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/6/61/HTML5_logo_and_wordmark.svg/120px-HTML5_logo_and_wordmark.svg.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/tylingsoft/markdown-plus&quot; target=&quot;_blank&quot;&gt;&lt;img style=&quot;position: absolute; top: 0; right: 0; border: 0;&quot; src=&quot;http://aral.github.com/fork-me-on-github-retina-ribbons/right-green.png&quot; alt=&quot;Fork me on GitHub&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;charts&quot;&gt;Charts&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://www.chartjs.org/docs/&quot;&gt;Documentation for charts&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;line-chart&quot;&gt;Line Chart&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-chart&quot;&gt;{
  &quot;type&quot;: &quot;line&quot;,
  &quot;data&quot;: {
    &quot;labels&quot;: [
      &quot;January&quot;,
      &quot;February&quot;,
      &quot;March&quot;,
      &quot;April&quot;,
      &quot;May&quot;,
      &quot;June&quot;,
      &quot;July&quot;
    ],
    &quot;datasets&quot;: [
      {
        &quot;label&quot;: &quot;# of bugs&quot;,
        &quot;fill&quot;: false,
        &quot;lineTension&quot;: 0.1,
        &quot;backgroundColor&quot;: &quot;rgba(75,192,192,0.4)&quot;,
        &quot;borderColor&quot;: &quot;rgba(75,192,192,1)&quot;,
        &quot;borderCapStyle&quot;: &quot;butt&quot;,
        &quot;borderDash&quot;: [],
        &quot;borderDashOffset&quot;: 0,
        &quot;borderJoinStyle&quot;: &quot;miter&quot;,
        &quot;pointBorderColor&quot;: &quot;rgba(75,192,192,1)&quot;,
        &quot;pointBackgroundColor&quot;: &quot;#fff&quot;,
        &quot;pointBorderWidth&quot;: 1,
        &quot;pointHoverRadius&quot;: 5,
        &quot;pointHoverBackgroundColor&quot;: &quot;rgba(75,192,192,1)&quot;,
        &quot;pointHoverBorderColor&quot;: &quot;rgba(220,220,220,1)&quot;,
        &quot;pointHoverBorderWidth&quot;: 2,
        &quot;pointRadius&quot;: 1,
        &quot;pointHitRadius&quot;: 10,
        &quot;data&quot;: [
          65,
          59,
          80,
          81,
          56,
          55,
          40
        ],
        &quot;spanGaps&quot;: false
      }
    ]
  },
  &quot;options&quot;: {}
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.chartjs.org/docs/#line-chart&quot;&gt;Documentation for Line Chart&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;bar-chart&quot;&gt;Bar Chart&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-chart&quot;&gt;{
  &quot;type&quot;: &quot;bar&quot;,
  &quot;data&quot;: {
  &quot;labels&quot;: [
    &quot;Red&quot;,
    &quot;Blue&quot;,
    &quot;Yellow&quot;,
    &quot;Green&quot;,
    &quot;Purple&quot;,
    &quot;Orange&quot;
  ],
  &quot;datasets&quot;: [
    {
    &quot;label&quot;: &quot;# of Votes&quot;,
    &quot;data&quot;: [
      12,
      19,
      3,
      5,
      2,
      3
    ],
    &quot;backgroundColor&quot;: [
      &quot;rgba(255, 99, 132, 0.2)&quot;,
      &quot;rgba(54, 162, 235, 0.2)&quot;,
      &quot;rgba(255, 206, 86, 0.2)&quot;,
      &quot;rgba(75, 192, 192, 0.2)&quot;,
      &quot;rgba(153, 102, 255, 0.2)&quot;,
      &quot;rgba(255, 159, 64, 0.2)&quot;
    ],
    &quot;borderColor&quot;: [
      &quot;rgba(255,99,132,1)&quot;,
      &quot;rgba(54, 162, 235, 1)&quot;,
      &quot;rgba(255, 206, 86, 1)&quot;,
      &quot;rgba(75, 192, 192, 1)&quot;,
      &quot;rgba(153, 102, 255, 1)&quot;,
      &quot;rgba(255, 159, 64, 1)&quot;
    ],
    &quot;borderWidth&quot;: 1
    }
  ]
  },
  &quot;options&quot;: {}
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.chartjs.org/docs/#bar-chart&quot;&gt;Documentation for Bar Chart&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;radar-chart&quot;&gt;Radar Chart&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-chart&quot;&gt;{
  &quot;type&quot;: &quot;radar&quot;,
  &quot;data&quot;: {
    &quot;labels&quot;: [
      &quot;Eating&quot;,
      &quot;Drinking&quot;,
      &quot;Sleeping&quot;,
      &quot;Designing&quot;,
      &quot;Coding&quot;,
      &quot;Cycling&quot;,
      &quot;Running&quot;
    ],
    &quot;datasets&quot;: [
      {
        &quot;label&quot;: &quot;My First dataset&quot;,
        &quot;backgroundColor&quot;: &quot;rgba(179,181,198,0.2)&quot;,
        &quot;borderColor&quot;: &quot;rgba(179,181,198,1)&quot;,
        &quot;pointBackgroundColor&quot;: &quot;rgba(179,181,198,1)&quot;,
        &quot;pointBorderColor&quot;: &quot;#fff&quot;,
        &quot;pointHoverBackgroundColor&quot;: &quot;#fff&quot;,
        &quot;pointHoverBorderColor&quot;: &quot;rgba(179,181,198,1)&quot;,
        &quot;data&quot;: [
          65,
          59,
          90,
          81,
          56,
          55,
          40
        ]
      },
      {
        &quot;label&quot;: &quot;My Second dataset&quot;,
        &quot;backgroundColor&quot;: &quot;rgba(255,99,132,0.2)&quot;,
        &quot;borderColor&quot;: &quot;rgba(255,99,132,1)&quot;,
        &quot;pointBackgroundColor&quot;: &quot;rgba(255,99,132,1)&quot;,
        &quot;pointBorderColor&quot;: &quot;#fff&quot;,
        &quot;pointHoverBackgroundColor&quot;: &quot;#fff&quot;,
        &quot;pointHoverBorderColor&quot;: &quot;rgba(255,99,132,1)&quot;,
        &quot;data&quot;: [
          28,
          48,
          40,
          19,
          96,
          27,
          100
        ]
      }
    ]
  },
  &quot;options&quot;: {}
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.chartjs.org/docs/#radar-chart&quot;&gt;Documentation for Radar Chart&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;polar-area-chart&quot;&gt;Polar Area Chart&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-chart&quot;&gt;{
  &quot;type&quot;: &quot;polarArea&quot;,
  &quot;data&quot;: {
    &quot;datasets&quot;: [
      {
        &quot;data&quot;: [
          11,
          16,
          7,
          3,
          14
        ],
        &quot;backgroundColor&quot;: [
          &quot;#FF6384&quot;,
          &quot;#4BC0C0&quot;,
          &quot;#FFCE56&quot;,
          &quot;#E7E9ED&quot;,
          &quot;#36A2EB&quot;
        ],
        &quot;label&quot;: &quot;My dataset&quot;
      }
    ],
    &quot;labels&quot;: [
      &quot;Red&quot;,
      &quot;Green&quot;,
      &quot;Yellow&quot;,
      &quot;Grey&quot;,
      &quot;Blue&quot;
    ]
  },
  &quot;options&quot;: {}
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.chartjs.org/docs/#polar-area-chart&quot;&gt;Documentation for Polar Area Chart&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;pie-chart&quot;&gt;Pie Chart&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-chart&quot;&gt;{
  &quot;type&quot;: &quot;pie&quot;,
  &quot;data&quot;: {
    &quot;labels&quot;: [
      &quot;Red&quot;,
      &quot;Blue&quot;,
      &quot;Yellow&quot;
    ],
    &quot;datasets&quot;: [
      {
        &quot;data&quot;: [
          300,
          50,
          100
        ],
        &quot;backgroundColor&quot;: [
          &quot;#FF6384&quot;,
          &quot;#36A2EB&quot;,
          &quot;#FFCE56&quot;
        ],
        &quot;hoverBackgroundColor&quot;: [
          &quot;#FF6384&quot;,
          &quot;#36A2EB&quot;,
          &quot;#FFCE56&quot;
        ]
      }
    ]
  },
  &quot;options&quot;: {}
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.chartjs.org/docs/#doughnut-pie-chart&quot;&gt;Documentation for Pie Chart&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;doughnut-chart&quot;&gt;Doughnut Chart&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-chart&quot;&gt;{
  &quot;type&quot;: &quot;doughnut&quot;,
  &quot;data&quot;: {
    &quot;labels&quot;: [
      &quot;Red&quot;,
      &quot;Blue&quot;,
      &quot;Yellow&quot;
    ],
    &quot;datasets&quot;: [
      {
        &quot;data&quot;: [
          300,
          50,
          100
        ],
        &quot;backgroundColor&quot;: [
          &quot;#FF6384&quot;,
          &quot;#36A2EB&quot;,
          &quot;#FFCE56&quot;
        ],
        &quot;hoverBackgroundColor&quot;: [
          &quot;#FF6384&quot;,
          &quot;#36A2EB&quot;,
          &quot;#FFCE56&quot;
        ]
      }
    ]
  },
  &quot;options&quot;: {}
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.chartjs.org/docs/#doughnut-pie-chart&quot;&gt;Documentation for Doughnut Chart&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;bubble-chart&quot;&gt;Bubble Chart&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-chart&quot;&gt;{
  &quot;type&quot;: &quot;bubble&quot;,
  &quot;data&quot;: {
    &quot;datasets&quot;: [
      {
        &quot;label&quot;: &quot;First Dataset&quot;,
        &quot;data&quot;: [
          {
            &quot;x&quot;: 20,
            &quot;y&quot;: 30,
            &quot;r&quot;: 15
          },
          {
            &quot;x&quot;: 40,
            &quot;y&quot;: 10,
            &quot;r&quot;: 10
          }
        ],
        &quot;backgroundColor&quot;: &quot;#FF6384&quot;,
        &quot;hoverBackgroundColor&quot;: &quot;#FF6384&quot;
      }
    ]
  },
  &quot;options&quot;: {}
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.chartjs.org/docs/#bubble-chart&quot;&gt;Documentation for Bubble Chart&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;footnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot;&gt;
      &lt;p&gt;Here is the footnote.&amp;nbsp;&lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:longnote&quot;&gt;
      &lt;p&gt;Here’s one with multiple blocks.&lt;/p&gt;

      &lt;p&gt;Subsequent paragraphs are indented to show that they
belong to the previous footnote.&amp;nbsp;&lt;a href=&quot;#fnref:longnote&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;</content><author><name>Barry New</name></author><summary type="html">Markdown Plus</summary></entry><entry><title type="html">jekyll中添加gitment留言板</title><link href="https://kago.site/2017/12/09/gitment/" rel="alternate" type="text/html" title="jekyll中添加gitment留言板" /><published>2017-12-09T00:00:00+08:00</published><updated>2017-12-09T00:00:00+08:00</updated><id>https://kago.site/2017/12/09/gitment</id><content type="html" xml:base="https://kago.site/2017/12/09/gitment/">&lt;h1 id=&quot;前言&quot;&gt;前言&lt;/h1&gt;
&lt;p&gt;最近使用jekyll搭建了个人博客（https://kago.site），参考网友资料为博客添加了gitment作为留言板，罗列一下基本步骤，希望可以帮到大家。&lt;/p&gt;

&lt;h1 id=&quot;申请github-oauth-application&quot;&gt;申请Github OAuth Application&lt;/h1&gt;
&lt;p&gt;Github头像下拉菜单 &amp;gt; Settings &amp;gt; 左边Developer settings下的OAuth Apps &amp;gt; New OAuth App，填写相关信息：&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Application name, Homepage URL, Application description 都可以随意填写&lt;/li&gt;
  &lt;li&gt;Authorization callback URL 一定要写自己Github Pages的URL&lt;/li&gt;
  &lt;li&gt;填写完上述信息后按Register application按钮，得到Client ID和Client Secret&lt;/li&gt;
  &lt;li&gt;记录Client ID和Client Secret，稍后会用到&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;在jekyll添加调用gitment&quot;&gt;在jekyll添加调用gitment&lt;/h1&gt;
&lt;p&gt;在_layout/目录下的 post.html, 添加一下代码：&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;div id=&quot;gitmentContainer&quot;&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;link rel=&quot;stylesheet&quot; href=&quot;https://imsun.github.io/gitment/style/default.css&quot;&amp;gt;
&amp;lt;script src=&quot;https://imsun.github.io/gitment/dist/gitment.browser.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;script&amp;gt;
var gitment = new Gitment({
    owner: 'Your GitHub username',
    repo: 'The repo to store comments',
    oauth: {
        client_id: 'Your client ID',
        client_secret: 'Your client secret',
    },
});
gitment.render('gitmentContainer');
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;需要修改的有4个地方&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Your GitHub username：填写你的Github Pages博客所在的github账户名&lt;/li&gt;
  &lt;li&gt;The repo to store comments：填写用来存放评论的github仓库，由于评论是 通过issues来存放的，个人建议这里可以直接填Github Pages个人博客所在的仓库&lt;/li&gt;
  &lt;li&gt;Your client ID：上一步所申请到的应用的Client ID&lt;/li&gt;
  &lt;li&gt;Your client secret：上一步所申请到的应用的Client Secret&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;填写完这4项把代码push到github。&lt;/p&gt;

&lt;h1 id=&quot;为博客初始化留言板&quot;&gt;为博客初始化留言板&lt;/h1&gt;
&lt;p&gt;gitment的原理是为每一遍博文以其URL作为标识创建一个github issue， 对该篇博客的评论就是对这个issue的评论。因此，需要对博客初始化， 初始化后，评论信息会添加到github上对应的issue。&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;上传代码成功后，博客文章下方会出现留言板，显示&lt;code class=&quot;highlighter-rouge&quot;&gt;Error: Comments Not Initialized&lt;/code&gt;,提示需要初始化&lt;/li&gt;
  &lt;li&gt;点击&lt;code class=&quot;highlighter-rouge&quot;&gt;login with github&lt;/code&gt;,使用自己github账号登录，错误信息会变成&lt;code class=&quot;highlighter-rouge&quot;&gt;Initialize Comments&lt;/code&gt;按钮&lt;/li&gt;
  &lt;li&gt;点击按钮，完成对博文的初始化，同时创建相应的issue
&lt;img src=&quot;/images/posts/gitment/gitment.png&quot; alt=&quot;gitment&quot; /&gt;&lt;/li&gt;
&lt;/ol&gt;</content><author><name>Barry New</name></author><summary type="html">前言 最近使用jekyll搭建了个人博客（https://kago.site），参考网友资料为博客添加了gitment作为留言板，罗列一下基本步骤，希望可以帮到大家。</summary></entry><entry><title type="html">Travis</title><link href="https://kago.site/2017/12/06/travis/" rel="alternate" type="text/html" title="Travis" /><published>2017-12-06T00:00:00+08:00</published><updated>2017-12-06T00:00:00+08:00</updated><id>https://kago.site/2017/12/06/travis</id><content type="html" xml:base="https://kago.site/2017/12/06/travis/"></content><author><name>Barry New</name></author><summary type="html"></summary></entry><entry><title type="html">没想到是这样的…</title><link href="https://kago.site/2017/11/19/mypets/" rel="alternate" type="text/html" title="没想到是这样的..." /><published>2017-11-19T00:00:00+08:00</published><updated>2017-11-19T00:00:00+08:00</updated><id>https://kago.site/2017/11/19/mypets</id><content type="html" xml:base="https://kago.site/2017/11/19/mypets/">&lt;h3 id=&quot;罪恶的源头&quot;&gt;罪恶的源头&lt;/h3&gt;

&lt;p&gt;一切到要从漫画家&lt;a href=&quot;http://wuhuang-wanshui.lofter.com/&quot;&gt;白茶&lt;/a&gt;养的两只“明星”说起，一只叫“吾皇”，另一只叫“巴扎黑”&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/wuhuang.jpg&quot; alt=&quot;吾皇&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/bazhahei.jpg&quot; alt=&quot;巴扎黑&quot; /&gt;&lt;/p&gt;

&lt;p&gt;只怪当时太年轻，以为集齐了吾皇和巴扎黑就能得到整个世界，然而故事好像偏离了轨道…&lt;/p&gt;

&lt;h3 id=&quot;我可能养了一只猪&quot;&gt;我可能养了一只猪&lt;/h3&gt;

&lt;p&gt;记得巴扎黑来到家里的时间大概是今年的8月15号，是女朋友送给我的，只因为我和她说过喜欢白茶养的巴扎黑。因此，我们家的小巴哥犬的名字也叫成了巴扎黑，觉得更贴切一些（其实只是因为懒）。当时这只小巴哥犬才2个月多一点，狂犬疫苗还没接种，但是阻挡不了我对它的喜爱：水汪汪的大眼睛总是像别人欠它好几块骨头似的。&lt;/p&gt;

&lt;p&gt;话不多说，直接上图：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/xiaoshihoudebazhahei.jpg&quot; alt=&quot;巴扎黑刚来的时候&quot; /&gt;&lt;/p&gt;

&lt;p&gt;巴哥犬在狗界是出了名的贪吃，加上它还是只幼犬，每天只想着吃吃吃，虽然每天都在控制食量，但还是在不到三个月的时间体重由4斤飙至11斤。粗壮的体型加上吃饭是发出的声音神似一只小猪…难怪经常被保洁阿姨唤作“你家那头小猪”。
巴扎黑，就问你羞不羞！！
&lt;img src=&quot;/images/blog/hazhaheishafa.jpg&quot; alt=&quot;胖子巴扎黑&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;我才是老大&quot;&gt;我才是老大&lt;/h3&gt;

&lt;p&gt;有了巴扎黑怎么能没有吾皇，就在一个阳光明媚的下午，一只橘猫来到的我们家。
&lt;img src=&quot;/images/blog/mao.jpg&quot; alt=&quot;蛋挞&quot; /&gt;&lt;/p&gt;

&lt;p&gt;女朋友一只想养只猫，早先养了一只美短，一个星期后送给了同事。为了这事儿她和我念叨了好多次，尤其是当巴扎黑在家里大小便的时候……&lt;/p&gt;

&lt;p&gt;蛋挞，是一只橘猫，就是最常见的家猫，以胖闻名于猫界，耳边隐约响起“十只橘猫九只胖，还有一只压塌炕”。一个星期的时间真心是见到了什么叫做能吃，肚子已经圆鼓鼓的了还在不停的找吃的。&lt;/p&gt;

&lt;p&gt;最让人抓狂的是，这个小家伙不和人亲热，一副diaodiao的样子，哎就当你是老大吧&lt;/p&gt;

&lt;h3 id=&quot;每天上演猫狗大战&quot;&gt;每天上演猫狗大战&lt;/h3&gt;

&lt;p&gt;每每想到客厅的惨状眼角就泛起了泪花，还是不写了，万一忍不住来个巴扎黑炖蛋挞呢……
&lt;img src=&quot;/images/blog/maogoudazhan.jpg&quot; alt=&quot;猫狗大战&quot; /&gt;&lt;/p&gt;</content><author><name>Barry New</name></author><summary type="html">罪恶的源头</summary></entry><entry><title type="html">mariadb的主从复制、主主复制、半同步复制的概念和方法</title><link href="https://kago.site/2017/11/19/mariadb-replicate/" rel="alternate" type="text/html" title="mariadb的主从复制、主主复制、半同步复制的概念和方法" /><published>2017-11-19T00:00:00+08:00</published><updated>2017-11-19T00:00:00+08:00</updated><id>https://kago.site/2017/11/19/mariadb-replicate</id><content type="html" xml:base="https://kago.site/2017/11/19/mariadb-replicate/">&lt;p&gt;这篇文章主要详细介绍了mariadb的主从复制、主主复制、半同步复制的概念和方法。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;参考&lt;a href=&quot;http://www.jb51.net/article/97786.htm&quot;&gt;http://www.jb51.net/article/97786.htm&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;主从服务器的时间要同步，数据库版本最好是一致的，以免造成函数处理、日志读取、日志解析等发生异常。
以下三个主从复制的设置是独立的。
注意防火墙和selinux的影响。&lt;/p&gt;

&lt;h1 id=&quot;1简单主从复制的实现&quot;&gt;&lt;strong&gt;1、简单主从复制的实现&lt;/strong&gt;&lt;/h1&gt;

&lt;h2 id=&quot;11-服务器1操作&quot;&gt;1.1 服务器1操作&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;安装mariadb-server
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# yum &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; install mariadb-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;编辑/etc/my.cnf文件&lt;/p&gt;

    &lt;p&gt;在[mysqld]段的最后添加以下内容&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# vim /etc/my.cnf
skip_name_resolve &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
innodb_file_per_table &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON    
server-id &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 1 &lt;span class=&quot;c&quot;&gt;#id号不能跟从服务器相同&lt;/span&gt;
log-bin &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; master-log &lt;span class=&quot;c&quot;&gt;#自定义二进制日志文件名&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;授权可以复制本地数据库信息的主机
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# systemctl start mariadb.service &lt;span class=&quot;c&quot;&gt;#启动mariadb server   &lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# mysql
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; grant replication slave,replication client on &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; to &lt;span class=&quot;s1&quot;&gt;'repluser'&lt;/span&gt;@&lt;span class=&quot;s1&quot;&gt;'10.1.51.%'&lt;/span&gt; identified by &lt;span class=&quot;s1&quot;&gt;'replpasswd'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; flush privileges&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;   
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show master status&lt;span class=&quot;se&quot;&gt;\G&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#查看主服务器的状态信息，在从服务器中要用到&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt; 1. row &lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt;
File: master-log.000003 &lt;span class=&quot;c&quot;&gt;#正在使用的二进制日志文件&lt;/span&gt;
Position: 497 &lt;span class=&quot;c&quot;&gt;#所处的位置&lt;/span&gt;
Binlog_Do_DB:
Binlog_Ignore_DB:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;12-从服务器的配置&quot;&gt;1.2 从服务器的配置&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;安装mariadb-server
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# yum &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; install mariadb-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;编辑/etc/my.cnf文件&lt;/p&gt;

    &lt;p&gt;在[mysqld]段的最后添加以下内容&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# vim /etc/my.cnf
skip_name_resolve &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
innodb_file_per_table &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
server-id &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 2 &lt;span class=&quot;c&quot;&gt;#id号不能跟主服务器相同）&lt;/span&gt;
relay-log &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; slave-log &lt;span class=&quot;c&quot;&gt;#自定义二进制日志文件名）&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;设置要从哪个主服务器的那个位置开始同步
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# systemctl start mariadb.service
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# mysql
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; change master to &lt;span class=&quot;nv&quot;&gt;master_host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'10.1.51.60'&lt;/span&gt;,master_user&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'repluser'&lt;/span&gt;,master_password&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'replpasswd'&lt;/span&gt;,master_log_file&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'master-log.000003'&lt;/span&gt;,master_log_pos&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;497&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; start slave&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#启动复制功能&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show slave status&lt;span class=&quot;se&quot;&gt;\G&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#查看从服务器的状态，下面显示的是部分内容&lt;/span&gt;
Master_Host: 10.1.51.60
Master_User: repluser
Master_Port: 3306
Connect_Retry: 60
Master_Log_File: master-log.000003
Read_Master_Log_Pos: 497
Relay_Log_File: slave-log.000002
Relay_Log_Pos: 530
Relay_Master_Log_File: master-log.000003
Slave_IO_Running: Yes
Slave_SQL_Running: Yes
Master_Server_Id: 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;13-测试&quot;&gt;1.3 测试&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;在主服务器导入事先准备好的数据库
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# mysql &amp;lt; hellodb.sql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;在从服务器查看是否同步
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show databases&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
+--------------------+
| Database   |
+--------------------+
| information_schema |
| hellodb   | &lt;span class=&quot;c&quot;&gt;#数据库已经同步&lt;/span&gt;
| mysql    |
| performance_schema |
| &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt;    |
+--------------------+
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; use hellodb&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;hellodb]&amp;gt; show tables&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#hellodb数据库的表也是同步的&lt;/span&gt;
+-------------------+
| Tables_in_hellodb |
+-------------------+
| classes   |
| coc    |
| courses   |
| scores   |
| students   |
| teachers   |
| toc    |
+-------------------+
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;2双主复制的实现&quot;&gt;&lt;strong&gt;2、双主复制的实现&lt;/strong&gt;&lt;/h1&gt;

&lt;h2 id=&quot;21-安装mariadb&quot;&gt;2.1 安装MariaDB&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;服务器1的操作：&lt;/li&gt;
&lt;/ul&gt;

&lt;ol&gt;
  &lt;li&gt;安装mariadb-server
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# yum &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; install mariadb-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;编辑/etc/my.cnf文件
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# vim /etc/my.cnf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;在[mysqld]段的最后添加以下内容&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;skip_name_resolve &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
innodb_file_per_table &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
server-id &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 1 &lt;span class=&quot;c&quot;&gt;#id号不能跟从服务器相同&lt;/span&gt;
log-bin &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; master-log &lt;span class=&quot;c&quot;&gt;#自定义主服务器的二进制日志文件名&lt;/span&gt;
relay-log &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; slave-log &lt;span class=&quot;c&quot;&gt;#自定义从服务器的二进制日志文件名&lt;/span&gt;
auto_increment_offset &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 1 
auto_increment_increment &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;启动服务
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# systemctl start mariadb.service	
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]#systemctl &lt;span class=&quot;nb&quot;&gt;enable &lt;/span&gt;mariadb.servic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;em&gt;服务器2的操作：&lt;/em&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;安装mariadb-server
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# yum &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; install mariadb-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;编辑/etc/my.cnf文件
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# vim /etc/my.cnf
skip_name_resolve &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
innodb_file_per_table &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
server-id &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 2
relay-log &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; slave-log
lob-bin &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; master-log
auto_increment_offset &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 2 
auto_increment_increment &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;启动服务
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# systemctl start mariadb.service	
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]#systemctl &lt;span class=&quot;nb&quot;&gt;enable &lt;/span&gt;mariadb.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;22-配置双主复制&quot;&gt;2.2 配置双主复制&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;在服务器2上查看的master状态&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;em&gt;说明：记录数据，在服务器2上配置时会用到。&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show master status&lt;span class=&quot;se&quot;&gt;\G&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt; 1. row &lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt;
File: master-log.000003
Position: 521
Binlog_Do_DB:
Binlog_Ignore_DB:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;服务器1上进行如下配置&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;em&gt;说明：以下配置的内容为服务器2的IP及服务器2上查到的master数据。&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# mysql
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; grant replication slave,replication client on &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; to &lt;span class=&quot;s1&quot;&gt;'repluser'&lt;/span&gt;@&lt;span class=&quot;s1&quot;&gt;'192.168.1.%'&lt;/span&gt; identified by &lt;span class=&quot;s1&quot;&gt;'replpasswd'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; change master to &lt;span class=&quot;nv&quot;&gt;master_host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'192.168.1.188'&lt;/span&gt;,master_user&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'repluser'&lt;/span&gt;,master_password&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'replpasswd'&lt;/span&gt;,master_log_file&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'master-log.000003'&lt;/span&gt;,master_log_pos&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;521&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; start slave&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; SHOW SLAVE STATUS&lt;span class=&quot;se&quot;&gt;\G&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt; 1. row &lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt;
              Slave_IO_State: Waiting &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;master to send event
                  Master_Host: 192.168.1.188
                  Master_User: repluser
                  Master_Port: 3306
                Connect_Retry: 60
              Master_Log_File: master-log.000003
          Read_Master_Log_Pos: 521
              Relay_Log_File: slave-log.000002
                Relay_Log_Pos: 806
        Relay_Master_Log_File: master-log.000003
            Slave_IO_Running: Yes
            Slave_SQL_Running: Yes
              Replicate_Do_DB:
          Replicate_Ignore_DB:
          Replicate_Do_Table:
      Replicate_Ignore_Table:
      Replicate_Wild_Do_Table:
  Replicate_Wild_Ignore_Table:
                  Last_Errno: 0
                  Last_Error:
                Skip_Counter: 0
          Exec_Master_Log_Pos: 521
              Relay_Log_Space: 1094
              Until_Condition: None
              Until_Log_File:
                Until_Log_Pos: 0
          Master_SSL_Allowed: No
          Master_SSL_CA_File:
          Master_SSL_CA_Path:
              Master_SSL_Cert:
            Master_SSL_Cipher:
              Master_SSL_Key:
        Seconds_Behind_Master: 0
Master_SSL_Verify_Server_Cert: No
                Last_IO_Errno: 0
                Last_IO_Error:
              Last_SQL_Errno: 0
              Last_SQL_Error:
  Replicate_Ignore_Server_Ids:
            Master_Server_Id: 2
1 row &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.00 sec&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;在服务器1查看master状态
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show master status&lt;span class=&quot;se&quot;&gt;\G&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt; 1. row &lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt;
File: master-log.000003
Position: 795
Binlog_Do_DB: 
Binlog_Ignore_DB:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;服务器2上进行如下配置&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;em&gt;说明：以下的配置内容为服务器1的IP及服务器1中查到的master信息&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# mysql
 MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; grant replication slave,replication client on &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; to &lt;span class=&quot;s1&quot;&gt;'repluser'&lt;/span&gt;@&lt;span class=&quot;s1&quot;&gt;'192.168.1.%'&lt;/span&gt; identified by &lt;span class=&quot;s1&quot;&gt;'replpasswd'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; change master to &lt;span class=&quot;nv&quot;&gt;master_host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'192.168.1.187'&lt;/span&gt;,master_user&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'repluser'&lt;/span&gt;,master_password&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'replpasswd'&lt;/span&gt;,master_log_file&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'master-log.000003'&lt;/span&gt;,master_log_pos&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;795&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; start slave&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show slave status&lt;span class=&quot;se&quot;&gt;\G&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt; 1. row &lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt;
              Slave_IO_State: Waiting &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;master to send event
                  Master_Host: 192.168.1.187
                  Master_User: repluser
                  Master_Port: 3306
                Connect_Retry: 60
              Master_Log_File: master-log.000003
          Read_Master_Log_Pos: 795
              Relay_Log_File: slave-log.000002
                Relay_Log_Pos: 530
        Relay_Master_Log_File: master-log.000003
            Slave_IO_Running: Yes
            Slave_SQL_Running: Yes
              Replicate_Do_DB:
          Replicate_Ignore_DB:
          Replicate_Do_Table:
      Replicate_Ignore_Table:
      Replicate_Wild_Do_Table:
  Replicate_Wild_Ignore_Table:
                  Last_Errno: 0
                  Last_Error:
                Skip_Counter: 0
          Exec_Master_Log_Pos: 795
              Relay_Log_Space: 818
              Until_Condition: None
              Until_Log_File:
                Until_Log_Pos: 0
          Master_SSL_Allowed: No
          Master_SSL_CA_File:
          Master_SSL_CA_Path:
              Master_SSL_Cert:
            Master_SSL_Cipher:
              Master_SSL_Key:
        Seconds_Behind_Master: 0
Master_SSL_Verify_Server_Cert: No
                Last_IO_Errno: 0
                Last_IO_Error:
              Last_SQL_Errno: 0
              Last_SQL_Error:
  Replicate_Ignore_Server_Ids:
            Master_Server_Id: 1
1 row &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.00 sec&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;23-测试&quot;&gt;2.3 测试&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;在任意一台服务器上创建mydb数据库
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; create database mydb&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;在另一台服务器上查看
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show databases&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
+--------------------+
| Database   |
+--------------------+
| information_schema |
| mydb    |
| mysql    |
| performance_schema |
| &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt;    |
+--------------------+
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;3半同步复制的实现&quot;&gt;&lt;strong&gt;3、半同步复制的实现&lt;/strong&gt;&lt;/h1&gt;

&lt;h2 id=&quot;31-在主服务器上的配置&quot;&gt;3.1 在主服务器上的配置&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;安装mariadb-server
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# yum &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; install mariadb-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;编辑/etc/my.cnf
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# vim /etc/my.cnf
 skip_name_resolve &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
 innodb_file_per_table &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
 server-id &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 1
 log-bin &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; master-log
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;授权可以复制本地数据库信息的主机&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# systemctl start mariadb.service &lt;span class=&quot;c&quot;&gt;#启动mariadb server&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# mysql
 MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; grant replication slave,replication client on &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; to &lt;span class=&quot;s1&quot;&gt;'repluser'&lt;/span&gt;@&lt;span class=&quot;s1&quot;&gt;'10.1.51.%'&lt;/span&gt; identified by &lt;span class=&quot;s1&quot;&gt;'replpasswd'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; flush privileges&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show master status&lt;span class=&quot;se&quot;&gt;\G&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#查看主服务器的状态信息，在从服务器中要用到&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt; 1. row &lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt;
File: master-log.000003 &lt;span class=&quot;c&quot;&gt;#正在使用的二进制日志文件&lt;/span&gt;
Position: 245 &lt;span class=&quot;c&quot;&gt;#所处的位置&lt;/span&gt;
Binlog_Do_DB:
Binlog_Ignore_DB:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;安装rpl semi sync_master插件，并启用
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# mysql
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; install plugin rpl_semi_sync_master soname &lt;span class=&quot;s1&quot;&gt;'semisync_master.so'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;global rpl_semi_sync_master_enabled &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show plugins&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;#可查看插件是否激活&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show global variables like &lt;span class=&quot;s1&quot;&gt;'rpl_semi%'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;#可查看安装的插件是否启用&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show global status like &lt;span class=&quot;s1&quot;&gt;'%semi%'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;#可查看从服务器的个数，此时是0个&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;32从服务器的配置&quot;&gt;3.2从服务器的配置&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;安装mariadb-server
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# yum &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; install mariadb-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;编辑/etc/my.cnf文件
在[mysqld]段的最后添加以下内容
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# vim /etc/my.cnf
skip_name_resolve &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
innodb_file_per_table &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
server-id &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 2 &lt;span class=&quot;c&quot;&gt;#id号不能跟主服务器相同&lt;/span&gt;
relay-log &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; slave-log &lt;span class=&quot;c&quot;&gt;#自定义二进制日志文件名&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;设置要从哪个主服务器的那个位置开始同步
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# systemctl start mariadb.service 
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# mysql 
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; change master to &lt;span class=&quot;nv&quot;&gt;master_host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'10.1.51.60'&lt;/span&gt;,master_user&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'repluser'&lt;/span&gt;,master_password&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'replpasswd'&lt;/span&gt;,master_log_file&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'master-log.000003'&lt;/span&gt;,master_log_pos&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;245&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;安装rpl semi sync_slave插件并启用
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# mysql 
 MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; install plugin rpl_semi_sync_slave soname &lt;span class=&quot;s1&quot;&gt;'semisync_slave.so'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;global rpl_semi_sync_slave_enabled &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; start slave&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;完成上面配置后，可以在主服务器上查看半同步复制的相关信息，命令如下：&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show global status like &lt;span class=&quot;s1&quot;&gt;'%semi%'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
Rpl_semi_sync_master_clients 1 &lt;span class=&quot;c&quot;&gt;#从服务器有一台&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;33-测试&quot;&gt;3.3 测试&lt;/h3&gt;

&lt;p&gt;测试以个人实际情况而定&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;在主服务器上导入事先准备好的数据库hellodb.sql
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;hellodb]&amp;gt; &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt; /root/hellodb.sql&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;在主服务器上查看半同步复制的状态&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;hellodb]&amp;gt; show master status&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
+-------------------+----------+--------------+------------------+
| File    | Position | Binlog_Do_DB | Binlog_Ignore_DB |
+-------------------+----------+--------------+------------------+
| master-log.000003 |  8102 |    |     |
+-------------------+----------+--------------+------------------+ 
MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;hellodb]&amp;gt; show global status like &lt;span class=&quot;s1&quot;&gt;'%semi%'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
+--------------------------------------------+-------+
| Variable_name        | Value |
+--------------------------------------------+-------+
| Rpl_semi_sync_master_clients    | 1  |
| Rpl_semi_sync_master_net_avg_wait_time  | 1684 |
| Rpl_semi_sync_master_net_wait_time   | 60630 |
| Rpl_semi_sync_master_net_waits    | 36 |
| Rpl_semi_sync_master_no_times    | 1  |
| Rpl_semi_sync_master_no_tx     | 1  |
| Rpl_semi_sync_master_status    | ON |
| Rpl_semi_sync_master_timefunc_failures  | 0  |
| Rpl_semi_sync_master_tx_avg_wait_time  | 1884 |
| Rpl_semi_sync_master_tx_wait_time   | 65965 |
| Rpl_semi_sync_master_tx_waits    | 35 |
| Rpl_semi_sync_master_wait_pos_backtraverse | 0  |
| Rpl_semi_sync_master_wait_sessions   | 0  |
| Rpl_semi_sync_master_yes_tx    | 35 |
+--------------------------------------------+-------+
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;在从服务器上查看是否同步
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show databases&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; use hellodb&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;hellodb]&amp;gt; &lt;span class=&quot;k&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; from students&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;4-补充&quot;&gt;&lt;strong&gt;4 补充：&lt;/strong&gt;&lt;/h1&gt;

&lt;p&gt;基于上面的半同步复制配置复制的过滤器，复制过滤最好在从服务器上设置，步骤如下&lt;/p&gt;

&lt;h2 id=&quot;41-从服务器的配置&quot;&gt;4.1 从服务器的配置&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;关闭mariadb server
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# systemctl stop mariadb.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;编辑/etc/my.cnf文件
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# vim /etc/my.cnf
skip_name_resolve &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
innodb_file_per_table &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
server-id &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 2
relay-log &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; slave-log
replicate-do-db &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; mydb &lt;span class=&quot;c&quot;&gt;#只复制mydb数据库的内容&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;补充：常用的过滤选项如下&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;Replicate_Do_DB&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;Replicate_Ignore_DB&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;Replicate_Do_Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;Replicate_Ignore_Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;Replicate_Wild_Do_Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;Replicate_Wild_Ignore_Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;重启mariadb server
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# systemctl start mariadb.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;重启mariadb server后，半同步复制功能将被关闭，因此要重新启动&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show global variables like &lt;span class=&quot;s1&quot;&gt;'%semi%'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
+---------------------------------+-------+
| Variable_name     | Value |
+---------------------------------+-------+
| rpl_semi_sync_slave_enabled  | OFF |
| rpl_semi_sync_slave_trace_level | 32 |
+---------------------------------+-------+
 
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;global rpl_semi_sync_slave_enabled &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; stop slave&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;#需先关闭从服务器复制功能再重启&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; start slave&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;42测试&quot;&gt;4.2测试&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;主服务器上的hellodb数据库创建一个新表semitable
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;hellodb]&amp;gt; create table semitable &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;id int&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;在从服务器上查看hellodb数据库是否有semitable
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; use hellodb
MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;hellodb]&amp;gt; show tables&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;（并没有）
+-------------------+
| Tables_in_hellodb |
+-------------------+
| classes   |
| coc    |
| courses   |
| scores   |
| students   |
| teachers   |
| toc    |
+-------------------+
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;在主服务器上创建mydb数据库，并为其创建一个tbl1表
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;hellodb]&amp;gt; create database mydb&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;在从服务器上查看mydb数据库的是否有tbl1表
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;hellodb]&amp;gt; use mydb&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;mydb]&amp;gt; show tables&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; （可以查看到）
+----------------+
| Tables_in_mydb |
+----------------+
| tbl1   |
+----------------+
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;</content><author><name>Barry New</name></author><summary type="html">这篇文章主要详细介绍了mariadb的主从复制、主主复制、半同步复制的概念和方法。 参考http://www.jb51.net/article/97786.htm</summary></entry><entry><title type="html">初尝</title><link href="https://kago.site/2017/11/17/first-blog/" rel="alternate" type="text/html" title="初尝" /><published>2017-11-17T00:00:00+08:00</published><updated>2017-11-17T00:00:00+08:00</updated><id>https://kago.site/2017/11/17/first-blog</id><content type="html" xml:base="https://kago.site/2017/11/17/first-blog/">&lt;h2 id=&quot;我是标题&quot;&gt;我是标题&lt;/h2&gt;

&lt;p&gt;我是正文~&lt;/p&gt;</content><author><name>Barry New</name></author><summary type="html">我是标题</summary></entry></feed>