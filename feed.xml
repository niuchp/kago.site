<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.7.3">Jekyll</generator><link href="https://kago.site/feed.xml" rel="self" type="application/atom+xml" /><link href="https://kago.site/" rel="alternate" type="text/html" /><updated>2018-05-05T22:12:45+08:00</updated><id>https://kago.site/</id><title type="html">é˜…åå³å¿˜ | ç‰›æ˜Œå¹³çš„ä¸ªäººåšå®¢</title><subtitle>ç‚¹æ»´ç§¯ç´¯ï¼Œèšæ²™æˆå¡”</subtitle><author><name>Barry New</name></author><entry><title type="html">æ¸¸ | ä¸€ä¸ªäººçš„ç©è€ Â· çŸ³èŠ±æ´</title><link href="https://kago.site/2018/03/10/shihuadong/" rel="alternate" type="text/html" title="æ¸¸ | ä¸€ä¸ªäººçš„ç©è€ Â· çŸ³èŠ±æ´" /><published>2018-03-10T00:00:00+08:00</published><updated>2018-03-10T00:00:00+08:00</updated><id>https://kago.site/2018/03/10/shihuadong</id><content type="html" xml:base="https://kago.site/2018/03/10/shihuadong/">&lt;blockquote&gt;
  &lt;p&gt;å¹´åä»¥æ¥ï¼Œå¿ƒä¸­ä¸€ç›´æ„Ÿè§‰æ†‹ç€ä»€ä¹ˆï¼Œæ²¡åœ°æ–¹å‘æ³„ï¼Œå¯èƒ½æ¥è‡ªå·¥ä½œï¼Œå¯èƒ½æ¥è‡ªé‚£æ®µå¤±è´¥çš„æ„Ÿæƒ…ï¼Œä¹Ÿæœ‰å¯èƒ½å‡ºäºå¯¹è‡ªå·±ç°çŠ¶çš„ç„¦èºï¼Œæ€»æƒ³æ‰¾ä¸ªæ–¹å¼å»å®£æ³„æˆ–è€…å»é€ƒé¿â€¦&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;å†™åœ¨å‰é¢&quot;&gt;å†™åœ¨å‰é¢&lt;/h3&gt;

&lt;p&gt;å¾ˆå¤šæ—¶å€™ä¸ä¼šéšè—è‡ªå·±çš„æƒ…ç»ªï¼Œå¿ƒæƒ…ä¸å¥½æ—¶å…¨éƒ½å†™åœ¨è„¸ä¸Šï¼Œæ¿ç€è„¸ä¸è¯´è¯ï¼Œä¸€åº¦å°Mæ¥å…¬å¸çš„æ—¶å€™è§‰å¾—æˆ‘å¾ˆä¸¥å‰æ˜¯ä¸€ä¸ªä¸å’Œè°çš„å­˜åœ¨ï¼›å¿ƒæƒ…å¥½çš„æ—¶å€™åˆæ— æ‰€é¡¾å¿Œåœ°è¡¨è¾¾ç€ï¼Œç”šè‡³æ˜¯æ‰‹èˆè¶³è¹ˆçš„å‘èº«è¾¹äººåˆ†äº«å–œæ‚¦ï¼Œæ—¶è€Œé€—æ¯”æ—¶è€Œå‚»é€¼ï¼Œæ²¡èƒ½æŠŠè‡ªå·±çš„æƒ…ç»ªæ§åˆ¶åœ¨è‡ªå·±çš„å°ä¸–ç•Œé‡Œï¼Œæ²¡èƒ½â€œè£…â€å‡ºä¸€å‰¯æ²‰ç¨³çš„æ ·å­ï¼Œå¾€å¾€è¢«åˆ«äººå®šä¹‰ä¸ºâ€œå¹¼ç¨šâ€ï¼Œå°¤å…¶æ˜¯å½“ä½ åœ¨æ„çš„äººå¯¹ä½ å¦‚æ­¤è¯„ä»·ï¼Œå¿ƒä¸­é˜µé˜µåˆºç—›ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹æ ‡çŸ¥ä¹ä¸­ä¸€ä½ç½‘å‹å¯¹æˆç†Ÿçš„å®šä¹‰ï¼š&lt;strong&gt;â€œä¸éœ€è¦é ä¸€åˆ‡é˜¿è°€å¤–ç•Œçš„è¡Œä¸ºæ¥è·å¾—å®‰å…¨æ„Ÿã€‚ä¸éœ€è¦é ä¸€åˆ‡è´¬æŸå¤–ç•Œçš„è¡Œä¸ºæ¥è·å¾—ä¼˜è¶Šæ„Ÿã€‚ä¸éœ€è¦é å¤–ç•Œçš„ä¸€åˆ‡è¤’æ‰¬æ¥è·å¾—å­˜åœ¨æ„Ÿã€‚â€&lt;/strong&gt; ç»†ç»†æƒ³æ¥ç¡®å®æ˜¯æœ‰ä¸€äº›ï¼Œæœ€èµ·ç æˆ‘éƒ½ä¸èƒ½å¾ˆå¥½çš„ç‹¬å¤„ï¼šä¸æƒ³ä¸€ä¸ªäººå›åˆ°ä½å¤„ï¼Œä¸æƒ³é¢å¯¹é»‘æš—çš„æˆ¿é—´ï¼ˆä»¥è‡³äºä¹°äº†æ™ºèƒ½å°ç¯ã€æ™ºèƒ½ç¯å¸¦è®©æˆ‘æ‰“å¼€é—¨çš„æ—¶å€™æˆ¿é—´è‡³å°‘æ˜¯äº®ç€çš„ï¼‰ï¼Œä¸å–œæ¬¢èµ–åºŠï¼Œä¸å–œæ¬¢ä¸€ä¸ªäººå‡ºå»ç©ï¼Œä¸å–œæ¬¢ä¸€ä¸ªäººé€›å•†åœºâ€¦æœ‰æƒ³åšçš„äº‹æƒ…æ—¶ï¼Œå‘èº«è¾¹çš„æœ‹å‹å‘ä¸€åœˆé‚€è¯·ï¼Œå¾€å¾€éƒ½ä¼šè¢«æ‹’ç»ï¼Œå¯¼è‡´è¿‘æœŸä¸€ä¸ªäººå»å•†åœºã€ä¸€ä¸ªäººå»è¶…å¸‚ã€ä¸€ä¸ªäººå»æ¸¸æˆå…æŠ“å¨ƒå¨ƒã€ä¸€ä¸ªäººå»çœ‹ç”µå½±ã€ä¸€ä¸ªäººå»åƒç«é”…ï¼Œèµ·åˆè§‰å¾—æœ‰ä¸€ä¸ä¸æ‚²å‡‰çš„èµ¶è„šï¼Œä½†è§‰å¾—è¿™æ ·çš„äº‹è¿˜æ˜¯åº”è¯¥å­¦ä¼šé€‚åº”ï¼Œæ¯•ç«Ÿè¿™æ ·æ‰ä¸ä¼šåœ¨å¤±å»æŸäº›äººæŸäº›ä¸œè¥¿çš„æ—¶å€™é€‚åº”ä¸æ¥ã€‚&lt;/p&gt;

&lt;p&gt;æ—¢ç„¶è¿˜æœ‰å¾ˆå¤šäº‹æƒ…è¦ä¸€ä¸ªäººå»åšï¼Œé‚£å°±æ¥ä¸€æ¬¡è¯´èµ°å°±èµ°çš„ç©è€å§ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä¸€ä¸ªäººçš„æ¸¸ç©&quot;&gt;ä¸€ä¸ªäººçš„æ¸¸ç©&lt;/h3&gt;

&lt;p&gt;å‰ä¸¤å¤©æƒ³å»å…¬å›­èµèŠ±ï¼Œå¥ˆä½•è¿˜ä¸åˆ°èµèŠ±çš„æ—¶èŠ‚ï¼Œä½†æ˜¯åˆæƒ³å‡ºå»æ•£æ•£å¿ƒï¼Œçªç„¶æƒ³åˆ°å»å¹´çš„æ—¶å€™å°Yå»è¿‡ä¸€æ¬¡çŸ³èŠ±æ´ï¼Œæ®è¯´è¿˜ä¸é”™ã€‚æƒ³å¹²å°±å¹²ï¼Œå‘¨å…­å°±å»ï¼&lt;/p&gt;

&lt;h4 id=&quot;å‡ºå‘&quot;&gt;å‡ºå‘&lt;/h4&gt;

&lt;p&gt;6:30 èµ·åºŠæ´—æ¼±ï¼ŒèƒŒåŒ…é‡Œè£…äº†å‰ä¸€å¤©å¤‡å¥½çš„é›¶é£Ÿã€çƒ­æ°´ï¼Œå¸¦ä¸Šè€³æœºè·¯ä¸Šå¬ä¹¦æ¶ˆç£¨æ—¶å…‰&lt;/p&gt;

&lt;p&gt;7:00 å‡ºå‘ä¹˜å 694 åˆ°å…­é‡Œæ¡¥ä¸œ- å¿«901åˆ°é˜æ‘ - æˆ¿43åˆ°çŸ³èŠ±æ´&lt;/p&gt;

&lt;p&gt;ä¸­é—´æœ‰ä¸€ä¸ªå°æ’æ›²ï¼Œåˆ°é˜æ‘çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰æ‰¾åˆ°åœ°å›¾ä¸Šæ˜¾ç¤ºçš„å…¬äº¤ç«™ï¼Œä¸€é—®å½“åœ°çš„ä¸€ä½å¤§å”ï¼ŒåŸæ¥æˆ¿43åˆšèµ°ä¸‰ä¸¤åˆ†é’Ÿï¼Œå‘çˆ¹çš„æˆ¿43è·¯æ¯éš”1å°æ—¶å‘è½¦ä¸€è¶Ÿï¼Œéš¾é“è¦å‡‰äº†ï¼Ÿè¿˜å¥½çµæœºä¸€åŠ¨ç«‹é©¬å»å¿«901ä¸‹è½¦çš„åœ°æ–¹å 833è·¯ è¶…è¿‡ä¸Šç­è½¦æå‰åˆ°è¾›å¼€å£ç«™æ¢ä¹˜æˆ¿43ï¼Œè¿æ°”ä¸é”™åˆšä¸‹833è·¯ä¸åˆ°ä¸¤åˆ†é’Ÿæˆ¿43å°±ç´§éšèµ·æ¥ï¼ˆæˆ¿43ç•¥æ¯”833ç»•ä¸€äº›ï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ªæ—¶é—´å·®ï¼‰ã€‚&lt;/p&gt;

&lt;h4 id=&quot;å‚è§‚æº¶æ´&quot;&gt;å‚è§‚æº¶æ´&lt;/h4&gt;

&lt;p&gt;10:00 åˆ°è¾¾çŸ³èŠ±æ´æ™¯åŒº&lt;/p&gt;

&lt;p&gt;ç”±äºçŸ³èŠ±æ´æ˜¯åœ°ä¸‹æº¶æ´ï¼Œå°é˜¶æ¹¿æ»‘ï¼Œè€Œä¸”æ´å†…ç¯å…‰å¼€ä¸€æ¬¡åªä¿æŒå‡ åˆ†é’Ÿï¼ˆæ®è¯´æ˜¯æœ‰çƒ­å…‰æºé˜²æ­¢é•¿é’è‹”ï¼Œåæ‚”æ²¡å¸¦ä¸ªæ‰‹ç”µç­’ğŸ”¦ï¼‰ï¼Œå› æ­¤æ¯æ¬¡è¿›æ´éƒ½ä¼šæ”’å¤Ÿäººæ•°ç”±å¯¼æ¸¸å¸¦è·¯ï¼Œå¤§çº¦ç­‰åˆ° 10:25 çš„æ—¶å€™ï¼Œå·¥ä½œäººå‘˜å¼€å§‹æ£€ç¥¨æ”¾è¡Œï¼Œä¸€è¡Œäººç»ˆäºè¿›åˆ°äº†çŸ³èŠ±æ´å†…ã€‚&lt;/p&gt;

&lt;p&gt;çŸ³èŠ±æ´æ˜¯ 1981 å¹´å¼€å§‹å¼€æ”¾ï¼Œæ€»å…±æœ‰ 7 å±‚ï¼Œç›®å‰åªå¼€æ”¾å‰ 4 å±‚ï¼Œæ®è¯´ç¬¬ 7 å±‚æ˜¯åœ°ä¸‹æ²³æ­£åœ¨å¼€å‘ä¸­ï¼Œ1~4 å±‚å…¨é•¿ 2500 ç±³ï¼Œå¤§çº¦æ¸¸ç©éœ€è¦ 90 åˆ†é’Ÿï¼Œæ´å†…ä¸è®¾å«ç”Ÿé—´ã€‚&lt;/p&gt;

&lt;p&gt;ä¸¢å‡ å¼ æ´å†…æ™¯è§‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/shihuadong/1.jpg&quot; alt=&quot;1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/shihuadong/2.jpg&quot; alt=&quot;2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/shihuadong/3.jpg&quot; alt=&quot;3&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/shihuadong/4.jpg&quot; alt=&quot;4&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/shihuadong/5.jpg&quot; alt=&quot;5&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/shihuadong/6.jpg&quot; alt=&quot;6&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/shihuadong/7.jpg&quot; alt=&quot;7&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;å‡ºæ´&quot;&gt;å‡ºæ´&lt;/h4&gt;

&lt;p&gt;å·®ä¸å¤š 12ï¼š00 å·¦å³ä»çŸ³èŠ±æ´å‡ºæ¥ï¼Œç”±äºçŸ³èŠ±æ´æˆå¹´ä¿æŒ 13â„ƒ å·¦å³çš„æ¸©åº¦ï¼Œæ´å†…æ½®æ¹¿ä¸‹åˆ° 4  å±‚åå¾®å¾®æœ‰äº›çƒ­ï¼Œå†å‡ºæ´æ—¶ï¼Œèº«ä¸Šå·²ç»å†’å‡ºäº†å°æ±—ç ã€‚&lt;/p&gt;

&lt;p&gt;é¡ºç€æŒ‡ç¤ºç‰Œï¼Œä¸€éå‚è§‚æ—…æ¸¸çºªå¿µå“ä¸€è¾¹å‘ç€å…¬äº¤ç«™èµ°å»ï¼Œèµ°åˆ°å…¬äº¤ç«™å·²ç»12:20é”™è¿‡äº†ä¸Šä¸€ç­è½¦ï¼ˆ11:10ã€12:10ã€13:10â€¦æ¯éš”ä¸€å°æ—¶ä»çŸ³èŠ±æ´å‘è½¦ä¸€è¶Ÿï¼‰ã€‚
é”™è¿‡äº†é‚£å°±ç´¢æ€§ç­‰ä¸‹ä¸€è¶Ÿï¼Œå…ˆåƒé¥­ï¼Œåœ¨è½¦ç«™å¯¹é¢é€‰äº†å®¶åå«è½¦è¥é¤å…çš„å½“åœ°å°é¥­åº—ï¼Œè€æ¿ä¸Šäº†å¹´çºªè€³æœµä¸å¤ªå¥½ä½†æ˜¯æ‰‹è‰ºä¸é”™ï¼Œç‚¹äº†ä¸€ç›˜ä»€ä¹ˆä»€ä¹ˆè±†è…çš„ï¼Œå’Œä¸€ç›˜è½åœ°èœï¼ˆå¹¶ä¸çŸ¥é“ä»€ä¹ˆå«è½åœ°èœï¼Œå¥½å¥‡æ‰ç‚¹çš„ï¼Œä¸Šæ¥åå‘ç°æ˜¯ä¸€é“å†·æ‹Œçš„ï¼‰ï¼Œä¸‹å›¾æ˜¯ 53 å¤§æ´‹çš„ä¸­åˆé¥­ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/shihuadong/8.jpg&quot; alt=&quot;8&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;è¿”ç¨‹&quot;&gt;è¿”ç¨‹&lt;/h4&gt;

&lt;p&gt;13:10 å‡†æ—¶å‘è½¦è¿”ç¨‹ï¼Œä¸€è·¯æ— è¯â€¦&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/shihuadong/9.jpg&quot; alt=&quot;9&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;å†å“”å“”ä¸¤å¥&quot;&gt;å†å“”å“”ä¸¤å¥&lt;/h3&gt;

&lt;p&gt;è™½ç„¶æ—¶é—´å¤§éƒ¨åˆ†æ¶ˆè€—åœ¨äº†è·¯ä¸Šï¼Œä½†è‡ªå¨±è‡ªä¹è¶³å¤Ÿäº†â€¦åŸæœ¬æ‰“ç®—æ‰¾ä¸€æœ‰å¤©æåœ°å®çš„ä¸–å¤–ä¹‹åœ°ï¼Œé™åæ„Ÿæ‚Ÿäººç”Ÿï¼Œå¥ˆä½•æ²¡æœ‰é‚£ä¸ªå¤©èµ‹å¼‚èƒ½ï¼Œå¿ƒæ•£æ²¡æ•£äº†ä¸çŸ¥é“ï¼Œä½†è‡³å°‘æºœäº†è…¿ï¼Œä¹Ÿç®—æ˜¯å……å®çš„ä¸€å¤©å§ã€‚&lt;/p&gt;</content><author><name>Barry New</name></author><summary type="html">å¹´åä»¥æ¥ï¼Œå¿ƒä¸­ä¸€ç›´æ„Ÿè§‰æ†‹ç€ä»€ä¹ˆï¼Œæ²¡åœ°æ–¹å‘æ³„ï¼Œå¯èƒ½æ¥è‡ªå·¥ä½œï¼Œå¯èƒ½æ¥è‡ªé‚£æ®µå¤±è´¥çš„æ„Ÿæƒ…ï¼Œä¹Ÿæœ‰å¯èƒ½å‡ºäºå¯¹è‡ªå·±ç°çŠ¶çš„ç„¦èºï¼Œæ€»æƒ³æ‰¾ä¸ªæ–¹å¼å»å®£æ³„æˆ–è€…å»é€ƒé¿â€¦</summary></entry><entry><title type="html">ç”¨ Travis CI å…è´¹è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½² Jekyll</title><link href="https://kago.site/2018/01/25/travis-ci-for-jekyll/" rel="alternate" type="text/html" title="ç”¨ Travis CI å…è´¹è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½² Jekyll" /><published>2018-01-25T00:00:00+08:00</published><updated>2018-01-25T00:00:00+08:00</updated><id>https://kago.site/2018/01/25/travis-ci-for-jekyll</id><content type="html" xml:base="https://kago.site/2018/01/25/travis-ci-for-jekyll/">&lt;blockquote&gt;
  &lt;p&gt;å‰ä¸€æ®µæ—¶é—´æ­å»ºäº†ä¸ªäººåšå®¢ï¼Œä¸€ç›´è¯´è¦è®°å½•ä¸€ä¸‹æ­å»ºè¿‡ç¨‹ï¼Œç”±äºæ‡’æ‹–åˆ°ç°åœ¨â€¦â€¦æˆ‘çš„åšå®¢çš„æ­å»ºè¿‡ç¨‹åˆ†ä¸ºä¸¤é˜¶æ®µï¼Œç¬¬ä¸€é˜¶æ®µæ˜¯åˆ©ç”¨ Github Pages è¹­å…è´¹ç¯å¢ƒï¼Œå¯åŠ¨åšå®¢ï¼›ç¬¬äºŒé˜¶æ®µæ˜¯åˆ©ç”¨ Travsi æŒç»­é›†æˆï¼ŒæŠŠç¯å¢ƒè¿åˆ°è‡ªå·±çš„äº‘æœåŠ¡å™¨ã€‚ä¹‹æ‰€ä»¥è¿åˆ°è‡ªå·±çš„äº‘æœåŠ¡å™¨ï¼Œä¸»è¦åŸå› æ˜¯ Github Pages ç¦æ­¢ç™¾åº¦èœ˜è››ï¼Œæ„å‘³ç€ç™¾åº¦ä¸èƒ½æ”¶å½•ç½‘ç«™ï¼Œæœç´¢ç«™ç‚¹åç§°çš„æ—¶å€™å°±æœç´¢ä¸åˆ°ï¼Œè¿™å¯¹äºæˆ‘è¿™ç§å–œæ¬¢â€œç‚«è€€â€çš„é“¶æ¥è¯´å¿…é¡»ä¸èƒ½æ¥å—ã€‚æœ¬æ–‡ä»‹ç»åœ¨äº‘æœåŠ¡å™¨ä¸­æ­å»ºåšå®¢çš„å®Œæ•´è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ•´ä¸ªæ­å»ºè¿‡ç¨‹æ€è·¯å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;fork åšå®¢åˆ° Github ï¼Œä¿®æ”¹åšå®¢å±æ€§&lt;/li&gt;
  &lt;li&gt;æœ¬åœ° Markdown ç¼–å†™åšå®¢ï¼Œpush md æ–‡ä»¶åˆ° Github&lt;/li&gt;
  &lt;li&gt;é…ç½® Travis CI æ‰§è¡Œè‡ªåŠ¨ç¼–è¯‘ï¼Œç”Ÿæˆ html æ–‡ä»¶&lt;/li&gt;
  &lt;li&gt;ç¼–è¯‘å Travis CI push htmlæ–‡ä»¶åˆ°æ–°çš„ Github ä»“åº“&lt;/li&gt;
  &lt;li&gt;Travis CI é‡å¯äº‘æœåŠ¡å™¨ä¸­çš„å®¹å™¨ï¼Œæ‹‰å– Github ä¸­çš„ html æ–‡ä»¶å®Œæˆæ›´æ–°&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;1-åˆ©ç”¨-github-pages-æ­å»ºä¸ªäººåšå®¢&quot;&gt;1. åˆ©ç”¨ Github Pages æ­å»ºä¸ªäººåšå®¢&lt;/h3&gt;

&lt;p&gt;åˆ©ç”¨ Github Pages æ­å»ºä¸ªäººåšå®¢åœ¨ç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šèµ„æ–™äº†ï¼Œæœ‰çš„äººå¯èƒ½ä¼šè§‰å¾—è¿™æ˜¯åœ¨å å°ä¾¿å®œï¼Œå…¶å®å®Œå…¨æ˜¯å¤šè™‘äº†ï¼Œ Github æ˜¯é¼“åŠ±ä¸ªäººå»ºç«™æ»´ï¼Œæ‰€ä»¥æ”¾ä¸‹å¤§èƒ†çš„äº«å—çº¢åˆ©å§ã€‚&lt;/p&gt;

&lt;p&gt;æƒ³è¦äº«å— Github çš„çº¢åˆ©å½“ç„¶å‰ææ¡ä»¶æ˜¯è¦æœ‰ Github è´¦æˆ·ï¼Œæ³¨å†Œæ–¹æ³•å°±ä¸æäº†ï¼Œæˆ‘ä»¬ç›´æ¥å¼€å§‹ fork åšå®¢æ¨¡æ¿ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯å¤§ä½¬&lt;a href=&quot;https://github.com/mzlogin/mzlogin.github.io&quot;&gt;é©¬å£®&lt;/a&gt;ä¿®æ”¹æ ·å¼åçš„æ¨¡æ¿ï¼Œfork ä»¥åéœ€è¦åšä»¥ä¸‹ä¿®æ”¹ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;æ­£ç¡®è®¾ç½®é¡¹ç›®åç§°ä¸åˆ†æ”¯ã€‚&lt;/p&gt;

    &lt;p&gt;æŒ‰ç…§ GitHub Pages çš„è§„å®šï¼Œåç§°ä¸º username.github.io çš„é¡¹ç›®çš„ master åˆ†æ”¯ï¼Œæˆ–è€…å…¶å®ƒåç§°çš„é¡¹ç›®çš„ gh-pages åˆ†æ”¯å¯ä»¥è‡ªåŠ¨ç”Ÿæˆ GitHub Pages é¡µé¢ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ä¿®æ”¹åŸŸåã€‚&lt;/p&gt;

    &lt;p&gt;å¦‚æœä½ éœ€è¦ç»‘å®šè‡ªå·±çš„åŸŸåï¼Œé‚£ä¹ˆä¿®æ”¹ CNAME æ–‡ä»¶çš„å†…å®¹ï¼›å¦‚æœä¸éœ€è¦ç»‘å®šè‡ªå·±çš„åŸŸåï¼Œé‚£ä¹ˆåˆ æ‰ CNAME æ–‡ä»¶ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ä¿®æ”¹é…ç½®ã€‚&lt;/p&gt;

    &lt;p&gt;ç½‘ç«™çš„é…ç½®åŸºæœ¬éƒ½é›†ä¸­åœ¨ _config.yml æ–‡ä»¶ä¸­ï¼Œå°†å…¶ä¸­ä¸ä¸ªäººä¿¡æ¯ç›¸å…³çš„éƒ¨åˆ†æ›¿æ¢æˆä½ è‡ªå·±çš„ï¼Œæ¯”å¦‚ç½‘ç«™çš„ urlã€titleã€subtitle å’Œç¬¬ä¸‰æ–¹è¯„è®ºæ¨¡å—çš„é…ç½®ç­‰ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;è¯„è®ºæ¨¡å—:&lt;br /&gt;
 ç›®å‰æ”¯æŒ disqusã€gitment å’Œ gitalkï¼Œé€‰ç”¨å…¶ä¸­ä¸€ç§å°±å¯ä»¥äº†ã€‚å¯å‚çœ‹ä»¥å‰çš„åšæ–‡ &lt;a href=&quot;https://kago.site/2017/12/09/gitment/&quot;&gt;ã€Œjekyllä¸­æ·»åŠ gitmentç•™è¨€æ¿ã€&lt;/a&gt;ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;åˆ é™¤åŸæœ‰çš„æ–‡ç« ä¸å›¾ç‰‡ã€‚&lt;/p&gt;

    &lt;p&gt;å¦‚ä¸‹æ–‡ä»¶å¤¹ä¸­é™¤äº† template.md æ–‡ä»¶å¤–ï¼Œéƒ½å¯ä»¥å…¨éƒ¨åˆ é™¤ï¼Œç„¶åæ·»åŠ ä½ è‡ªå·±çš„å†…å®¹ã€‚&lt;br /&gt;
     _posts æ–‡ä»¶å¤¹ä¸­æ˜¯å·²å‘å¸ƒçš„åšå®¢æ–‡ç« ã€‚&lt;br /&gt;
     _drafts æ–‡ä»¶å¤¹ä¸­æ˜¯å°šæœªå‘å¸ƒçš„åšå®¢æ–‡ç« ã€‚&lt;br /&gt;
     _wiki æ–‡ä»¶å¤¹ä¸­æ˜¯å·²å‘å¸ƒçš„ wiki é¡µé¢ã€‚&lt;br /&gt;
     images æ–‡ä»¶å¤¹ä¸­æ˜¯æ–‡ç« å’Œé¡µé¢é‡Œä½¿ç”¨çš„å›¾ç‰‡ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ä¿®æ”¹ã€Œå…³äºã€é¡µé¢ã€‚&lt;/p&gt;

    &lt;p&gt;pages/about.md æ–‡ä»¶å†…å®¹å¯¹åº”ç½‘ç«™çš„ã€Œå…³äºã€é¡µé¢ï¼Œé‡Œé¢çš„å†…å®¹å¤šä¸ºä¸ªäººç›¸å…³ï¼Œå°†å®ƒä»¬æ›¿æ¢æˆä½ è‡ªå·±çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ _data ç›®å½•ä¸‹çš„ skills.yml å’Œ social.yml æ–‡ä»¶é‡Œçš„æ•°æ®ã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä¿®æ”¹å®Œåï¼Œå¢åŠ  CNAME ä¸­çš„åŸŸåä¸ Github Pages è§£æå…³ç³»ï¼Œç™»å½•åˆ°è´­ä¹°åŸŸåçš„ç½‘ç«™å¢åŠ åŸŸååˆ° 192.30.252.153 çš„è§£æã€‚å…¶ä¸­ï¼Œ 192.30.252.153 æ˜¯Github Pages çš„æœåŠ¡å™¨åœ°å€ã€‚æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥æ‰“å¼€æµè§ˆå™¨è®¿é—®ä½ çš„åšå®¢å•¦~&lt;/p&gt;

&lt;p&gt;Clone ä½ çš„ç½‘ç«™ä»£ç åº“åˆ°æœ¬åœ°ï¼Œä½¿ç”¨å¸¸è§çš„ç¼–è¾‘å™¨ï¼ˆæœ¬äººä½¿ç”¨çš„æ˜¯ vs code ï¼‰å†™åšå®¢ï¼Œç„¶åå†pushåˆ° Github å³å¯ã€‚ç”±äºè¯¥è¯¥åšå®¢æ¨¡æ¿æ˜¯åˆ©ç”¨ Jekyll å®ç°çš„é™æ€ç½‘ç«™ï¼Œæ”¯æŒ Markdown ï¼Œè¿™ç®€ç›´æ˜¯å¤ªæ–¹ä¾¿äº†ï¼ŒæŒ‰ç…§ Markdown çš„è¯­æ³•å°½æƒ…çš„å†™åšå®¢å°±å¥½äº†ï¼Œ Github Pages ä¼šè‡ªåŠ¨è¯†åˆ« Markdown æ ¼å¼çš„ã€‚&lt;/p&gt;

&lt;h3 id=&quot;2-åˆ©ç”¨-travis-æŒç»­é›†æˆ&quot;&gt;2. åˆ©ç”¨ Travis æŒç»­é›†æˆ&lt;/h3&gt;

&lt;h4 id=&quot;21-æ·»åŠ -github-ä»“åº“è‡³-travis&quot;&gt;2.1 æ·»åŠ  Github ä»“åº“è‡³ Travis&lt;/h4&gt;

&lt;p&gt;åˆ©ç”¨ Travis éƒ¨åˆ†è¦æ„Ÿè°¢ &lt;a href=&quot;https://mritd.me/&quot;&gt;æ¼ ç„¶&lt;/a&gt; åœ¨åšå®¢ä¸­åˆ†æçš„ä»–çš„å®ç°æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;æ³¨å†Œ Travis CI è´¦å·ï¼Œç„¶åç‚¹å‡»æœ€å·¦ä¾§ + æŒ‰é’®æ·»åŠ é¡¹ç›®&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/travis/å¢åŠ ä»“åº“.png&quot; alt=&quot;å¢åŠ ä»“åº“&quot; /&gt;&lt;/p&gt;

&lt;p&gt;é€‰æ‹©æ·»åŠ åˆ° Travis çš„ä»“åº“&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/travis/é€‰æ‹©ä»“åº“.png&quot; alt=&quot;é€‰æ‹©ä»“åº“&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç‚¹å‡»ä»“åº“æ—çš„è®¾ç½®&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/travis/é…ç½®ä»“åº“.png&quot; alt=&quot;é…ç½®ä»“åº“&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;22-åˆ›å»ºtravisyaml&quot;&gt;2.2 åˆ›å»º.travis.yaml&lt;/h4&gt;
&lt;p&gt;åœ¨åšå®¢çš„æ ¹è·¯å¾„ä¸‹åˆ›å»º .travis.yaml é…ç½®æ–‡ä»¶ï¼Œå®ç°åŸºæœ¬é›†æˆé…ç½®ï¼š&lt;/p&gt;
&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;language&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ruby&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;rvm&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;2.3.3&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;bundle install&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;bundle exec jekyll build&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;only&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;master&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;global&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;NOKOGIRI_USE_SYSTEM_LIBRARIES=true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;æ›´å¤štravis.yamlé…ç½®å‚è€ƒå®˜æ–¹æ–‡æ¡£ &lt;a href=&quot;https://docs.travis-ci.com/&quot;&gt;https://docs.travis-ci.com/&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;23-æ·»åŠ -deploy-keys&quot;&gt;2.3 æ·»åŠ  deploy keys&lt;/h4&gt;

&lt;p&gt;åœ¨ .travis.yaml ä¸­è¿›è¡ŒåŠ å¯†é…ç½®ï¼Œæ˜¯ä¸ºäº†ä½¿ Travis CI å¯ä»¥å…å¯†ç è®¿é—® Github&lt;/p&gt;

&lt;p&gt;ç”Ÿæˆå¯†é’¥å¯¹ï¼Œå¹¶æ·»åŠ å…¬é’¥è‡³ Github çš„Deploy keys&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ssh-keygen &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; rsa &lt;span class=&quot;nt&quot;&gt;-C&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;youremail@example.com&quot;&lt;/span&gt;  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/images/posts/travis/deploy_keys.png&quot; alt=&quot;deploy_keys&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;24-å®‰è£…å¹¶ç™»é™†travis&quot;&gt;2.4 å®‰è£…å¹¶ç™»é™†travis&lt;/h4&gt;

&lt;p&gt;æ­¤æ­¥éª¤ä¸»è¦æ˜¯ä¸ºäº†ç”Ÿæˆ travis çš„ keys&lt;/p&gt;

&lt;p&gt;å®‰è£…&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gem install travis
travis login &lt;span class=&quot;nt&quot;&gt;--auto&lt;/span&gt;
Successfully logged &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;as niuchp!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;25-åŠ å¯†&quot;&gt;2.5 åŠ å¯†&lt;/h4&gt;

&lt;p&gt;åœ¨åŠ å¯†ä¹‹å‰æˆ‘ä»¬å…ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹éœ€æœ‰ .travis.yaml æ–‡ä»¶ã€‚åŠ å¯†çš„å°±æ˜¯ç¬¬ä¸€æ­¥ç”Ÿæˆçš„å¯†é’¥id_rsa&lt;/p&gt;

&lt;p&gt;æ‹·è´åœ¨ 2.3 æ­¥éª¤ä¸­ç”Ÿæˆå¯†é’¥å¯¹è‡³é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œå¹¶æ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;travis encrypt-file ssh_key &lt;span class=&quot;nt&quot;&gt;--add&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ—¶å€™çœ‹æœ€åä¸€å¥**Commit all changes to your .travis.yml.ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬çš„ .travis.yaml æ–‡ä»¶ä¸­å¤šäº†ä¸€å¥:(ç§äººå†…å®¹ä½¿ç”¨XXXä»£æ›¿)&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;openssl aes-256-cbc -K $encrypted_XXXXXXXX_key -iv $encrypted_XXXXXXXX_iv -in id_rsa.enc -out ~/.ssh/id_rsa -d&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;language&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ruby&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;rvm&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;2.3.3&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;before_install&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;openssl aes-256-cbc -K $encrypted_xxxxxxx_key -iv $encrypted_xxxxxxx_iv -in id_rsa.enc -out ~/.ssh/id_rsa -d&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;chmod 600 ~/.ssh/id_rsa&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;bundle install&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;bundle exec jekyll build&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;global&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;NOKOGIRI_USE_SYSTEM_LIBRARIES=true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;å†æ¬¡æŸ¥çœ‹æˆ‘ä»¬çš„ Travis CI ç½‘é¡µï¼Œå‘ç°å¤šäº†ä¸€äº›å˜åŒ–&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/travis/åŠ å¯†.png&quot; alt=&quot;åŠ å¯†&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;è®°å¾—è¦åˆ é™¤ id_rsa æ–‡ä»¶ï¼Œç§é’¥æ–‡ä»¶å·²ç»ç”± id_rsa.enc æ›¿ä»£&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;26-é…ç½®è‡ªåŠ¨æ›´æ–°&quot;&gt;2.6 é…ç½®è‡ªåŠ¨æ›´æ–°&lt;/h4&gt;

&lt;p&gt;è‡ªåŠ¨æ›´æ–°éƒ¨åˆ†æ˜¯åˆ©ç”¨ Travis CI push ç¼–è¯‘åçš„æ–‡ä»¶è‡³ä¸€ä¸ªæ–°çš„ä»£ç åº“ï¼Œé‡å¯å®¹å™¨è§¦å‘ git pull å®ç°çš„ã€‚&lt;/p&gt;

&lt;p&gt;Travis CI push é™æ€æ–‡ä»¶åˆ° Github é€šè¿‡ Github çš„ token å®ç°æˆæƒï¼Œä»£ç å¦‚ä¸‹&lt;/p&gt;
&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;after_success&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;git clone https://github.com/niuchp/kago.site.git&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cd kago.site &amp;amp;&amp;amp; rm -rf * &amp;amp;&amp;amp; cp -r ../_site/* .&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;git config user.name &quot;niuchp&quot;&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;git config user.email &quot;niuchp@126.com&quot;&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;git add --all .&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;git commit -m &quot;Travis CI Auto Builder&quot;&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;git push --force https://$JEKYLL_GITHUB_TOKEN@github.com/niuchp/kago.site.git master&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ssh root@kago.site &quot;docker restart kago_site&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;æ³¨æ„ï¼š é…ç½®æ–‡ä»¶ä¸­çš„kago.site.gitä¸ºæ–°ä»“åº“ï¼&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å…¶ä¸­ï¼ŒJEKYLL_GITHUB_TOKEN æ˜¯ä» Github æˆæƒå¾—åˆ°çš„ï¼Œç„¶åç»™äºç›¸åº”æƒé™å³å¯&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/travis/travis_deploy_keys.png&quot; alt=&quot;travis_deploy_keys&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¾—åˆ°JEKYLL_GITHUB_TOKENååœ¨ Travish CIçš„é¡¹ç›®é…ç½®ä¸­æ·»åŠ ç¯å¢ƒå˜é‡$JEKYLL_GITHUB_TOKEN å¦‚ä¸‹å›¾:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/travis/env.png&quot; alt=&quot;env&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å®Œæ•´çš„ .travis.yaml é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;language&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ruby&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;rvm&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;2.3.3&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;before_install&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;openssl aes-256-cbc -K $encrypted_xxxxxxx_key -iv $encrypted_xxxxxxx_iv -in id_rsa.enc -out ~/.ssh/id_rsa -d&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;chmod 600 ~/.ssh/id_rsa&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;bundle install&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;bundle exec jekyll build&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;after_success&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;git clone https://github.com/niuchp/kago.site.git&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cd kago.site &amp;amp;&amp;amp; rm -rf * &amp;amp;&amp;amp; cp -r ../_site/* .&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;git config user.name &quot;niuchp&quot;&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;git config user.email &quot;niuchp@126.com&quot;&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;git add --all .&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;git commit -m &quot;Travis CI Auto Builder&quot;&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;git push --force https://$JEKYLL_GITHUB_TOKEN@github.com/niuchp/kago.site.git master&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ssh root@kago.site &quot;docker restart kago_site&quot;&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;only&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;master&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;global&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;NOKOGIRI_USE_SYSTEM_LIBRARIES=true&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;addons&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;ssh_known_hosts&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;kago.site&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;3-é…ç½®-docker-å®¹å™¨&quot;&gt;3. é…ç½® docker å®¹å™¨&lt;/h3&gt;

&lt;p&gt;Travis CI æŒç»­é›†æˆåä¼šé‡å¯äº‘æœåŠ¡å™¨ä¸­çš„ docker å®¹å™¨ï¼Œè§¦å‘ git pull å®Œæˆæ›´æ–°ã€‚&lt;/p&gt;

&lt;p&gt;Dockerfile&lt;/p&gt;

&lt;div class=&quot;language-dockerfile highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; nginx:1.13.6-alpine &lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;LABEL&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; maintainer=&quot;Barry New &amp;lt;niuchp@126.com&amp;gt;&quot;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;ARG&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; TZ='Asia/Shanghai'&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; TZ ${TZ}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;RUN &lt;/span&gt;apk upgrade &lt;span class=&quot;nt&quot;&gt;--update&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\
&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apk add bash git &lt;span class=&quot;se&quot;&gt;\
&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; /usr/share/nginx/html &lt;span class=&quot;se&quot;&gt;\
&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; git clone https://github.com/niuchp/kago.site.git /usr/share/nginx/html &lt;span class=&quot;se&quot;&gt;\
&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; ln &lt;span class=&quot;nt&quot;&gt;-sf&lt;/span&gt; /usr/share/zoneinfo/&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;TZ&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt; /etc/localtime &lt;span class=&quot;se&quot;&gt;\
&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;TZ&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; /etc/timezone &lt;span class=&quot;se&quot;&gt;\
&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; /var/cache/apk/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;ADD&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; entrypoint.sh /entrypoint.sh&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;COPY&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; default.conf /etc/nginx/conf.d/&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;WORKDIR&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; /usr/share/nginx/html&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;CMD&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; [&quot;/entrypoint.sh&quot;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;entrypoint.sh&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;

git pull
nginx &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;daemon off;&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;default.conf&lt;/p&gt;

&lt;div class=&quot;language-conf highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt; {
    &lt;span class=&quot;n&quot;&gt;listen&lt;/span&gt;       &lt;span class=&quot;m&quot;&gt;443&lt;/span&gt;;
    &lt;span class=&quot;n&quot;&gt;server_name&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;localhost&lt;/span&gt;;
    &lt;span class=&quot;n&quot;&gt;ssl&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;on&lt;/span&gt;;
    &lt;span class=&quot;n&quot;&gt;ssl_certificate&lt;/span&gt;  /&lt;span class=&quot;n&quot;&gt;usr&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;share&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;nginx&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;ssl&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;fullchain&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;cer&lt;/span&gt;;
    &lt;span class=&quot;n&quot;&gt;ssl_certificate_key&lt;/span&gt;  /&lt;span class=&quot;n&quot;&gt;usr&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;share&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;nginx&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;ssl&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;;
    &lt;span class=&quot;c&quot;&gt;#charset koi8-r;
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#access_log  /var/log/nginx/host.access.log  main;
&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;location&lt;/span&gt; / {
        &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;   /&lt;span class=&quot;n&quot;&gt;usr&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;share&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;nginx&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt;;
        &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;htm&lt;/span&gt;;
    }

    &lt;span class=&quot;c&quot;&gt;#error_page  404              /404.html;
&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# redirect server error pages to the static page /50x.html
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;error_page&lt;/span&gt;   &lt;span class=&quot;m&quot;&gt;500&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;502&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;503&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;504&lt;/span&gt;  /&lt;span class=&quot;m&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt;;
    &lt;span class=&quot;n&quot;&gt;location&lt;/span&gt; = /&lt;span class=&quot;m&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt; {
        &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;   /&lt;span class=&quot;n&quot;&gt;usr&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;share&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;nginx&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;html&lt;/span&gt;;
    }

    &lt;span class=&quot;c&quot;&gt;# proxy the PHP scripts to Apache listening on 127.0.0.1:80
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#location ~ \.php$ {
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#    proxy_pass   http://127.0.0.1;
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#}
&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#location ~ \.php$ {
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#    root           html;
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#    fastcgi_pass   127.0.0.1:9000;
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#    fastcgi_index  index.php;
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#    include        fastcgi_params;
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#}
&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# deny access to .htaccess files, if Apache's document root
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# concurs with nginx's one
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#location ~ /\.ht {
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#    deny  all;
&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#}
&lt;/span&gt;}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åˆ°æ­¤ï¼Œæ•´ä¸ªé…ç½®è¿‡ç¨‹å°±ç»“æŸäº†ï¼Œå¯ä»¥é€šè¿‡ git push è§¦å‘ Travis CI è¿›è¡Œæµ‹è¯•ã€‚&lt;/p&gt;</content><author><name>Barry New</name></author><summary type="html">å‰ä¸€æ®µæ—¶é—´æ­å»ºäº†ä¸ªäººåšå®¢ï¼Œä¸€ç›´è¯´è¦è®°å½•ä¸€ä¸‹æ­å»ºè¿‡ç¨‹ï¼Œç”±äºæ‡’æ‹–åˆ°ç°åœ¨â€¦â€¦æˆ‘çš„åšå®¢çš„æ­å»ºè¿‡ç¨‹åˆ†ä¸ºä¸¤é˜¶æ®µï¼Œç¬¬ä¸€é˜¶æ®µæ˜¯åˆ©ç”¨ Github Pages è¹­å…è´¹ç¯å¢ƒï¼Œå¯åŠ¨åšå®¢ï¼›ç¬¬äºŒé˜¶æ®µæ˜¯åˆ©ç”¨ Travsi æŒç»­é›†æˆï¼ŒæŠŠç¯å¢ƒè¿åˆ°è‡ªå·±çš„äº‘æœåŠ¡å™¨ã€‚ä¹‹æ‰€ä»¥è¿åˆ°è‡ªå·±çš„äº‘æœåŠ¡å™¨ï¼Œä¸»è¦åŸå› æ˜¯ Github Pages ç¦æ­¢ç™¾åº¦èœ˜è››ï¼Œæ„å‘³ç€ç™¾åº¦ä¸èƒ½æ”¶å½•ç½‘ç«™ï¼Œæœç´¢ç«™ç‚¹åç§°çš„æ—¶å€™å°±æœç´¢ä¸åˆ°ï¼Œè¿™å¯¹äºæˆ‘è¿™ç§å–œæ¬¢â€œç‚«è€€â€çš„é“¶æ¥è¯´å¿…é¡»ä¸èƒ½æ¥å—ã€‚æœ¬æ–‡ä»‹ç»åœ¨äº‘æœåŠ¡å™¨ä¸­æ­å»ºåšå®¢çš„å®Œæ•´è¿‡ç¨‹ã€‚</summary></entry><entry><title type="html">etcdé›†ç¾¤å®‰è£…åŠåŸºæœ¬æ“ä½œ</title><link href="https://kago.site/2018/01/24/etcd-cluster/" rel="alternate" type="text/html" title="etcdé›†ç¾¤å®‰è£…åŠåŸºæœ¬æ“ä½œ" /><published>2018-01-24T00:00:00+08:00</published><updated>2018-01-24T00:00:00+08:00</updated><id>https://kago.site/2018/01/24/etcd-cluster</id><content type="html" xml:base="https://kago.site/2018/01/24/etcd-cluster/">&lt;blockquote&gt;
  &lt;p&gt;etcd æ˜¯ kubernetes ä¸­é»˜è®¤ä½¿ç”¨çš„é”®å€¼å­˜å‚¨ç³»ç»Ÿï¼Œç›¸å½“äºæ˜¯ kubernetes é›†ç¾¤çš„å¤§è„‘ï¼Œé‚£ä¹ˆ etcd æ€ä¹ˆå®‰è£…ä½¿ç”¨å‘¢ï¼Ÿä¸‹é¢ä¸ºå¸¸ç”¨çš„é›†ç¾¤é…ç½®åŠåŸºæœ¬æ“ä½œã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;etcd æ˜¯ä¸€ä¸ªç”¨äºå…±äº«é…ç½®å’ŒæœåŠ¡çš„é«˜å¯ç”¨é”®å€¼å­˜å‚¨ç³»ç»Ÿï¼Œç”± CoreOS ä½¿ç”¨å¼€å‘å¹¶ä½œä¸º CoreOS çš„åŸºç¡€æœåŠ¡å¯åŠ¨ã€‚etcd çš„çµæ„Ÿæ¥æºäº Apache ZooKeeper å’Œ doozerï¼Œå…¶ç‰¹ç‚¹ï¼š&lt;/p&gt;

&lt;p&gt;Â· ç®€å•ï¼šå¯ç”¨ curl è¿›è¡Œæ“ä½œï¼ˆHTTP+JSONï¼‰ &lt;br /&gt;
Â· å®‰å…¨ï¼šå¯ä½¿ç”¨ SSL å®¢æˆ·ç«¯è¯ä¹¦éªŒè¯&lt;br /&gt;
Â· å¿«é€Ÿï¼šåŸºå‡†æµ‹è¯•åœ¨æ¯ä¸ªå®ä¾‹ 1000 æ¬¡å†™å…¥æ¯ç§’&lt;br /&gt;
Â· å¯é : ä½¿ç”¨ Raft åè®®æ¥è¿›è¡Œåˆç†çš„åˆ†å¸ƒå¼&lt;/p&gt;

&lt;h3 id=&quot;å®˜æ–¹ç½‘ç«™&quot;&gt;å®˜æ–¹ç½‘ç«™&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/coreos/etcd/&quot;&gt;https://github.com/coreos/etcd/&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;å®‰è£…ç¯å¢ƒ&quot;&gt;å®‰è£…ç¯å¢ƒ&lt;/h3&gt;

&lt;p&gt;æ“ä½œç³»ç»Ÿï¼š CentOS7&lt;br /&gt;
etcdç‰ˆæœ¬ï¼š 3.0.4&lt;br /&gt;
3èŠ‚ç‚¹é›†ç¾¤ç¤ºä¾‹&lt;br /&gt;
etcd0: 192.168.8.101&lt;br /&gt;
etcd1: 192.168.8.102&lt;br /&gt;
etcd2: 192.168.8.103&lt;/p&gt;

&lt;h3 id=&quot;å®‰è£…etcdé›†ç¾¤&quot;&gt;å®‰è£…etcdé›†ç¾¤&lt;/h3&gt;

&lt;h4 id=&quot;ä¸€å®‰è£…è½¯ä»¶åŒ…&quot;&gt;ä¸€ã€å®‰è£…è½¯ä»¶åŒ…&lt;/h4&gt;

&lt;p&gt;&lt;em&gt;ä¸‰ä¸ªèŠ‚ç‚¹éƒ½æ‰§è¡Œ&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl &lt;span class=&quot;nt&quot;&gt;-sSL&lt;/span&gt; https://github.com/coreos/etcd/releases/download/v3.0.4/etcd-v3.0.4-linux-amd64.tar.gz|tar &lt;span class=&quot;nt&quot;&gt;-xvf&lt;/span&gt; - &lt;span class=&quot;nt&quot;&gt;--gzip&lt;/span&gt;
cp &lt;span class=&quot;nt&quot;&gt;-af&lt;/span&gt; etcd-v3.0.4-linux-amd64/&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;etcd,etcdctl&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; /usr/local/bin
chmod +x /usr/local/bin/&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;etcd,etcdctl&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h4 id=&quot;äºŒé…ç½®etcd&quot;&gt;äºŒã€é…ç½®etcd&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/coreos/etcd/blob/master/Documentation/op-guide/clustering.md&quot;&gt;https://github.com/coreos/etcd/blob/master/Documentation/op-guide/clustering.md&lt;/a&gt;&lt;br /&gt;
clusterå¸®åŠ©æ–‡æ¡£&lt;br /&gt;
etcd-v3.0.4-linux-amd64/Documentation/op-guide/clustering.md&lt;br /&gt;
This guide will cover the following mechanisms for bootstrapping an etcd cluster:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#static&quot;&gt;Static&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#etcd-discovery&quot;&gt;etcd Discovery&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#dns-discovery&quot;&gt;DNS Discovery&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç›®å‰æ”¯æŒä¸‰ç§å‘ç°æ–¹å¼ï¼ŒStaticé€‚ç”¨äºæœ‰å›ºå®šIPçš„ä¸»æœºèŠ‚ç‚¹ï¼Œetcd Discoveryé€‚ç”¨äºDHCPç¯å¢ƒï¼ŒDNS Discoveryä¾èµ–DNS SRVè®°å½•&lt;/p&gt;

&lt;p&gt;&lt;em&gt;æç¤ºï¼šetcdæ”¯æŒssl/tls,è¯¦è§å®˜æ–¹æ–‡æ¡£&lt;br /&gt;
&lt;a href=&quot;https://github.com/coreos/etcd/blob/master/Documentation/op-guide/security.md&quot;&gt;https://github.com/coreos/etcd/blob/master/Documentation/op-guide/security.md&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä»¥ä¸‹ä½¿ç”¨staticæ–¹å¼&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;èŠ‚ç‚¹ä¸€: etcd0: 192.168.8.101&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;etcd &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; etcd0 &lt;span class=&quot;nt&quot;&gt;--data-dir&lt;/span&gt; /opt/etcd &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--initial-advertise-peer-urls&lt;/span&gt; http://192.168.8.101:2380 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--listen-peer-urls&lt;/span&gt; http://192.168.8.101:2380 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--listen-client-urls&lt;/span&gt; http://192.168.8.101:2379,http://127.0.0.1:2379 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--advertise-client-urls&lt;/span&gt; http://192.168.8.101:2379 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--initial-cluster-token&lt;/span&gt; etcd-cluster-1 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--initial-cluster&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;etcd0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.101:2380,etcd1&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.102:2380,etcd2&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.103:2380 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--initial-cluster-state&lt;/span&gt; new
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;èŠ‚ç‚¹äºŒ: etcd1: 192.168.8.102&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;etcd &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; etcd1 &lt;span class=&quot;nt&quot;&gt;--data-dir&lt;/span&gt; /opt/etcd &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--initial-advertise-peer-urls&lt;/span&gt; http://192.168.8.102:2380 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--listen-peer-urls&lt;/span&gt; http://192.168.8.102:2380 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--listen-client-urls&lt;/span&gt; http://192.168.8.102:2379,http://127.0.0.1:2379 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--advertise-client-urls&lt;/span&gt; http://192.168.8.102:2379 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--initial-cluster-token&lt;/span&gt; etcd-cluster-1 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--initial-cluster&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;etcd0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.101:2380,etcd1&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.102:2380,etcd2&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.103:2380 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--initial-cluster-state&lt;/span&gt; new
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;èŠ‚ç‚¹ä¸‰: etcd2: 192.168.8.103&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;etcd &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; etcd2 &lt;span class=&quot;nt&quot;&gt;--data-dir&lt;/span&gt; /opt/etcd &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--initial-advertise-peer-urls&lt;/span&gt; http://192.168.8.103:2380 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--listen-peer-urls&lt;/span&gt; http://192.168.8.103:2380 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--listen-client-urls&lt;/span&gt; http://192.168.8.103:2379,http://127.0.0.1:2379 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--advertise-client-urls&lt;/span&gt; http://192.168.8.103:2379 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--initial-cluster-token&lt;/span&gt; etcd-cluster-1 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--initial-cluster&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;etcd0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.101:2380,etcd1&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.102:2380,etcd2&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.103:2380 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--initial-cluster-state&lt;/span&gt; new 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;è¯´æ˜&lt;/strong&gt;&lt;br /&gt;
2379 æ˜¯ç”¨äºç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚ï¼Œ2380 ç”¨äºé›†ç¾¤é€šä¿¡ï¼Œâ€“data-diræŒ‡å®šæ•°æ®å­˜æ”¾ç›®å½•&lt;br /&gt;
æ³¨æ„:&lt;br /&gt;
ä¸Šé¢çš„åˆå§‹åŒ–åªæ˜¯åœ¨é›†ç¾¤åˆå§‹åŒ–æ—¶è¿è¡Œä¸€æ¬¡ï¼Œä¹‹åæœåŠ¡æœ‰é‡å¯ï¼Œå¿…é¡»è¦å»é™¤æ‰initialå‚æ•°ï¼Œå¦åˆ™æŠ¥é”™ã€‚&lt;br /&gt;
è¯·ä½¿ç”¨å¦‚ä¸‹ç±»ä¼¼å‘½ä»¤:&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;etcd &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; etcd2   &lt;span class=&quot;nt&quot;&gt;--data-dir&lt;/span&gt; /opt/etcd &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--listen-peer-urls&lt;/span&gt; http://192.168.8.103:2380 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--listen-client-urls&lt;/span&gt; http://192.168.8.103:2379,http://127.0.0.1:2379 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--advertise-client-urls&lt;/span&gt; http://192.168.8.103:2379 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;ä¸‰systemdç®¡æ§&quot;&gt;ä¸‰ã€systemdç®¡æ§&lt;/h4&gt;

&lt;p&gt;åˆ›å»º etcd.service  ï¼ˆä»¥ etcd0 ä¸ºä¾‹ï¼‰&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;/lib/systemd/system/etcd.service &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;HERE&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
[Unit]
Description=Etcd Server
After=network.target
After=network-online.target
Wants=network-online.target

[Service]
Type=notify
WorkingDirectory=/opt/etcd/
ExecStart=/usr/local/bin/etcd --name etcd0 --data-dir /opt/etcd \
  --initial-advertise-peer-urls http://192.168.8.101:2380 \
  --listen-peer-urls http://192.168.8.101:2380 \
  --listen-client-urls http://192.168.8.101:2379,http://127.0.0.1:2379 \
  --advertise-client-urls http://192.168.8.101:2379 \
  --initial-cluster-token etcd-cluster-1 \
  --initial-cluster etcd0=http://192.168.8.101:2380,etcd1=http://192.168.8.102:2380,etcd2=http://192.168.8.103:2380 \
  --initial-cluster-state new
Restart=on-failure
LimitNOFILE=1000000

[Install]
WantedBy=multi-user.target
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;å¯åŠ¨etcdæœåŠ¡&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node1 ~]# systemctl &lt;span class=&quot;nb&quot;&gt;enable &lt;/span&gt;etcd
Created symlink from /etc/systemd/system/multi-user.target.wants/etcd.service to /usr/lib/systemd/system/etcd.service.
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node1 ~]# systemctl start etcd
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node1 ~]# systemctl status etcd
â—etcd.service - Etcd Server
  Loaded: loaded &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;/usr/lib/systemd/system/etcd.service&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; enabled&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; vendor preset: disabled&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  Active: active &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;running&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; since 2018-01-23 15:06:30 CST&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 8min ago
 Main PID: 12099 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;etcd&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  CGroup: /system.slice/etcd.service
         â””â”€12099 /usr/local/bin/etcd &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; etcd0 &lt;span class=&quot;nt&quot;&gt;--data-dir&lt;/span&gt; /opt/etcd
......
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;etcdé›†ç¾¤ç®¡ç†&quot;&gt;etcdé›†ç¾¤ç®¡ç†&lt;/h3&gt;

&lt;p&gt;å®˜æ–¹åœ°å€&lt;br /&gt;
&lt;a href=&quot;https://github.com/coreos/etcd/blob/master/Documentation/op-guide/maintenance.md&quot;&gt;https://github.com/coreos/etcd/blob/master/Documentation/op-guide/maintenance.md&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node3 ~]# etcdctl &lt;span class=&quot;nt&quot;&gt;--version&lt;/span&gt;
etcdctl version: 3.0.4
 
 
API version: 2
COMMANDS:
    backup         backup an etcd directory
    cluster-health  check the health of the etcd cluster
    mk            make a new key with a given value
    mkdir          make a new directory
    rm            remove a key or a directory
    rmdir          removes the key &lt;span class=&quot;k&quot;&gt;if &lt;/span&gt;it is an empty directory or a key-value pair
    get           retrieve the value of a key
    &lt;span class=&quot;nb&quot;&gt;ls            &lt;/span&gt;retrieve a directory
    &lt;span class=&quot;nb&quot;&gt;set           set &lt;/span&gt;the value of a key
    setdir         create a new directory or update an existing directory TTL
    update         update an existing key with a given value
    updatedir      update an existing directory
    watch          watch a key &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;changes
    exec-watch     watch a key &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;changes and &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;an executable
    member         member add, remove and list subcommands
    import         import a snapshot to a cluster
    user          user add, grant and revoke subcommands
    role          role add, grant and revoke subcommands
    auth          overall auth controls
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;ä¸€é›†ç¾¤å¥åº·çŠ¶æ€&quot;&gt;ä¸€ã€é›†ç¾¤å¥åº·çŠ¶æ€&lt;/h4&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node3 ~]# etcdctl cluster-health
member 2947dd07df9e44da is healthy: got healthy result from http://192.168.8.102:2379
member 571bf93ce7760601 is healthy: got healthy result from http://192.168.8.101:2379
member b200a8bec19bd22e is healthy: got healthy result from http://192.168.8.103:2379
cluster is healthy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;äºŒé›†ç¾¤æˆå‘˜æŸ¥çœ‹&quot;&gt;äºŒã€é›†ç¾¤æˆå‘˜æŸ¥çœ‹&lt;/h4&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node3 ~]# etcdctl member list
2947dd07df9e44da: &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;etcd1 &lt;span class=&quot;nv&quot;&gt;peerURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.102:2380 &lt;span class=&quot;nv&quot;&gt;clientURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.102:2379 &lt;span class=&quot;nv&quot;&gt;isLeader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;false
&lt;/span&gt;571bf93ce7760601: &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;etcd0 &lt;span class=&quot;nv&quot;&gt;peerURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.101:2380 &lt;span class=&quot;nv&quot;&gt;clientURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.101:2379 &lt;span class=&quot;nv&quot;&gt;isLeader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;true
&lt;/span&gt;b200a8bec19bd22e: &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;etcd2 &lt;span class=&quot;nv&quot;&gt;peerURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.103:2380 &lt;span class=&quot;nv&quot;&gt;clientURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.103:2379 &lt;span class=&quot;nv&quot;&gt;isLeader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;ä¸‰åˆ é™¤é›†ç¾¤æˆå‘˜&quot;&gt;ä¸‰ã€åˆ é™¤é›†ç¾¤æˆå‘˜&lt;/h4&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node2 ~]# etcdctl member remove b200a8bec19bd22e 
Removed member 4d11141f72b2744c from cluster
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node2 ~]# etcdctl member list
2947dd07df9e44da: &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;etcd1 &lt;span class=&quot;nv&quot;&gt;peerURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.102:2380 &lt;span class=&quot;nv&quot;&gt;clientURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.102:2379 &lt;span class=&quot;nv&quot;&gt;isLeader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;false
&lt;/span&gt;571bf93ce7760601: &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;etcd0 &lt;span class=&quot;nv&quot;&gt;peerURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.101:2380 &lt;span class=&quot;nv&quot;&gt;clientURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.101:2379 &lt;span class=&quot;nv&quot;&gt;isLeader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;å››æ·»åŠ é›†ç¾¤æˆå‘˜&quot;&gt;å››ã€æ·»åŠ é›†ç¾¤æˆå‘˜&lt;/h4&gt;
&lt;p&gt;å®˜æ–¹è¯´æ˜ï¼š
&lt;a href=&quot;https://github.com/coreos/etcd/blob/master/Documentation/op-guide/runtime-configuration.md&quot;&gt;https://github.com/coreos/etcd/blob/master/Documentation/op-guide/runtime-configuration.md&lt;/a&gt;&lt;br /&gt;
&lt;em&gt;æ³¨æ„:æ­¥éª¤å¾ˆé‡è¦ï¼Œä¸ç„¶ä¼šæŠ¥é›†ç¾¤IDä¸åŒ¹é…&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node2 ~]# etcdctl member add &lt;span class=&quot;nt&quot;&gt;--help&lt;/span&gt;
NAME:
  etcdctl member add - add a new member to the etcd cluster
USAGE:
  etcdctl member add
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;1.å°†ç›®æ ‡èŠ‚ç‚¹æ·»åŠ åˆ°é›†ç¾¤&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node2 ~]# etcdctl member add etcd2 http://192.168.8.103:2380
Added member named etcd2 with ID 28e0d98e7ec15cd4 to cluster

&lt;span class=&quot;nv&quot;&gt;ETCD_NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;etcd2&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;ETCD_INITIAL_CLUSTER&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;etcd2=http://192.168.8.103:2380,etcd1=http://192.168.8.102:2380,etcd0=http://192.168.8.101:2380&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;ETCD_INITIAL_CLUSTER_STATE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;existing&quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node2 ~]# etcdctl member list
2947dd07df9e44da: &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;etcd1 &lt;span class=&quot;nv&quot;&gt;peerURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.102:2380 &lt;span class=&quot;nv&quot;&gt;clientURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.102:2379 &lt;span class=&quot;nv&quot;&gt;isLeader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;false
&lt;/span&gt;571bf93ce7760601: &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;etcd0 &lt;span class=&quot;nv&quot;&gt;peerURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.101:2380 &lt;span class=&quot;nv&quot;&gt;clientURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.101:2379 &lt;span class=&quot;nv&quot;&gt;isLeader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;true
&lt;/span&gt;d4f257d2b5f99b64[unstarted]: &lt;span class=&quot;nv&quot;&gt;peerURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.103:2380
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œé›†ç¾¤ä¼šä¸ºç›®æ ‡èŠ‚ç‚¹ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„member ID&lt;/p&gt;

&lt;p&gt;2.æ¸…ç©ºç›®æ ‡èŠ‚ç‚¹çš„data-dir&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node3 ~]#rm &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; /opt/etcd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;em&gt;æ³¨æ„:èŠ‚ç‚¹åˆ é™¤åï¼Œé›†ç¾¤ä¸­çš„æˆå‘˜ä¿¡æ¯ä¼šæ›´æ–°ï¼Œæ–°èŠ‚ç‚¹åŠ å…¥é›†ç¾¤æ˜¯ä½œä¸ºä¸€ä¸ªå…¨æ–°çš„èŠ‚ç‚¹åŠ å…¥ï¼Œå¦‚æœdata-diræœ‰æ•°æ®ï¼Œetcdå¯åŠ¨æ—¶ä¼šè¯»å–å·±ç»å­˜åœ¨çš„æ•°æ®ï¼Œå¯åŠ¨æ—¶ä»ç„¶ç”¨çš„è€member ID,ä¹Ÿä¼šé€ æˆï¼Œé›†ç¾¤ä¸æ— æ³•åŠ å…¥ï¼Œæ‰€ä»¥ä¸€å®šè¦æ¸…ç©ºæ–°èŠ‚ç‚¹çš„data-dir&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;2016-08-12 01:59:41.084928 E | rafthttp: failed to find member 2947dd07df9e44da &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;cluster ce2f2517679629de
2016-08-12 01:59:41.133698 W | rafthttp: failed to process raft message &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;raft: stopped&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
2016-08-12 01:59:41.135746 W | rafthttp: failed to process raft message &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;raft: stopped&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
2016-08-12 01:59:41.170915 E | rafthttp: failed to find member 2947dd07df9e44da &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;cluster ce2f2517679629de
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;3.åœ¨ç›®æ ‡èŠ‚ç‚¹ä¸Šå¯åŠ¨etcd&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;etcd &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; etcd2 &lt;span class=&quot;nt&quot;&gt;--data-dir&lt;/span&gt; /opt/etcd &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--initial-advertise-peer-urls&lt;/span&gt; http://192.168.8.103:2380 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--listen-peer-urls&lt;/span&gt; http://192.168.8.103:2380 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--listen-client-urls&lt;/span&gt; http://192.168.8.103:2379,http://127.0.0.1:2379 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--advertise-client-urls&lt;/span&gt; http://192.168.8.103:2379 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--initial-cluster-token&lt;/span&gt; etcd-cluster-1 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--initial-cluster&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;etcd0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.101:2380,etcd1&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.102:2380,etcd2&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.103:2380 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--initial-cluster-state&lt;/span&gt; existing
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;æ³¨æ„:è¿™é‡Œçš„initialæ ‡è®°ä¸€å®šè¦æŒ‡å®šä¸ºexisting,å¦‚æœä¸ºnewåˆ™ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ–°çš„member ID,å’Œå‰é¢æ·»åŠ èŠ‚ç‚¹æ—¶ç”Ÿæˆçš„IDä¸ä¸€è‡´ï¼Œæ•…æ—¥å¿—ä¸­ä¼šæŠ¥èŠ‚ç‚¹IDä¸åŒ¹é…çš„é”™&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node2 ~]# etcdctl member list
28e0d98e7ec15cd4: &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;etcd2 &lt;span class=&quot;nv&quot;&gt;peerURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.103:2380 &lt;span class=&quot;nv&quot;&gt;clientURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.103:2379 &lt;span class=&quot;nv&quot;&gt;isLeader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;false
&lt;/span&gt;2947dd07df9e44da: &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;etcd1 &lt;span class=&quot;nv&quot;&gt;peerURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.102:2380 &lt;span class=&quot;nv&quot;&gt;clientURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.102:2379 &lt;span class=&quot;nv&quot;&gt;isLeader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;false
&lt;/span&gt;571bf93ce7760601: &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;etcd0 &lt;span class=&quot;nv&quot;&gt;peerURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.101:2380 &lt;span class=&quot;nv&quot;&gt;clientURLs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://192.168.8.101:2379 &lt;span class=&quot;nv&quot;&gt;isLeader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;äº”å¢åˆ æ”¹æŸ¥&quot;&gt;äº”ã€å¢åˆ æ”¹æŸ¥&lt;/h4&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node3 ~]# etcdctl &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;foo &lt;span class=&quot;s2&quot;&gt;&quot;bar&quot;&lt;/span&gt;
bar
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node3 ~]# etcdctl get foo
bar
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node3 ~]# etcdctl mkdir hello
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node3 ~]# etcdctl &lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt;
/foo
/hello
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node3 ~]# etcdctl &lt;span class=&quot;nt&quot;&gt;--output&lt;/span&gt; extended get foo
Key: /foo
Created-Index: 9
Modified-Index: 9
TTL: 0
Index: 10
bar
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node3 ~]# etcdctl &lt;span class=&quot;nt&quot;&gt;--output&lt;/span&gt; json get foo
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;action&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;get&quot;&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;node&quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;/foo&quot;&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;bar&quot;&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;nodes&quot;&lt;/span&gt;:null,&lt;span class=&quot;s2&quot;&gt;&quot;createdIndex&quot;&lt;/span&gt;:9,&lt;span class=&quot;s2&quot;&gt;&quot;modifiedIndex&quot;&lt;/span&gt;:9&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;prevNode&quot;&lt;/span&gt;:null&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node2 ~]# etcdctl update foo &lt;span class=&quot;s2&quot;&gt;&quot;etcd cluster is ok&quot;&lt;/span&gt;
etcd cluster is ok
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node2 ~]# etcdctl get foo
etcd cluster is ok
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node3 ~]# etcdctl import &lt;span class=&quot;nt&quot;&gt;--snap&lt;/span&gt;/opt/etcd/member/snap/db 
starting to import snapshot /opt/etcd/member/snap/db with 10 clients
2016-08-12 01:18:17.281921 I | entering dir: /
finished importing 0 keys
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h4 id=&quot;rest-api&quot;&gt;REST API&lt;/h4&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/coreos/etcd/tree/master/Documentation/learning&quot;&gt;https://github.com/coreos/etcd/tree/master/Documentation/learning&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node1 ~]# curl 192.168.8.101:2379/v2/keys 
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;action&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;get&quot;&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;node&quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;dir&quot;&lt;/span&gt;:true,&lt;span class=&quot;s2&quot;&gt;&quot;nodes&quot;&lt;/span&gt;:[&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;/foo&quot;&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;etcd cluster is ok&quot;&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;modifiedIndex&quot;&lt;/span&gt;:28,&lt;span class=&quot;s2&quot;&gt;&quot;createdIndex&quot;&lt;/span&gt;:9&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;/hello&quot;&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;dir&quot;&lt;/span&gt;:true,&lt;span class=&quot;s2&quot;&gt;&quot;modifiedIndex&quot;&lt;/span&gt;:10,&lt;span class=&quot;s2&quot;&gt;&quot;createdIndex&quot;&lt;/span&gt;:10&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;/registry&quot;&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;dir&quot;&lt;/span&gt;:true,&lt;span class=&quot;s2&quot;&gt;&quot;modifiedIndex&quot;&lt;/span&gt;:47,&lt;span class=&quot;s2&quot;&gt;&quot;createdIndex&quot;&lt;/span&gt;:47&lt;span class=&quot;o&quot;&gt;}]}}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node1 ~]# curl &lt;span class=&quot;nt&quot;&gt;-fs&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-X&lt;/span&gt; PUT 192.168.8.101:2379/v2/keys/_test
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;action&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;set&quot;&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;node&quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;/_test&quot;&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;modifiedIndex&quot;&lt;/span&gt;:1439,&lt;span class=&quot;s2&quot;&gt;&quot;createdIndex&quot;&lt;/span&gt;:1439&lt;span class=&quot;o&quot;&gt;}}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@node1 ~]# curl &lt;span class=&quot;nt&quot;&gt;-X&lt;/span&gt; GET 192.168.8.101:2379/v2/keys/_test
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;action&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;get&quot;&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;node&quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;/_test&quot;&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;modifiedIndex&quot;&lt;/span&gt;:1439,&lt;span class=&quot;s2&quot;&gt;&quot;createdIndex&quot;&lt;/span&gt;:1439&lt;span class=&quot;o&quot;&gt;}}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>Barry New</name></author><summary type="html">etcd æ˜¯ kubernetes ä¸­é»˜è®¤ä½¿ç”¨çš„é”®å€¼å­˜å‚¨ç³»ç»Ÿï¼Œç›¸å½“äºæ˜¯ kubernetes é›†ç¾¤çš„å¤§è„‘ï¼Œé‚£ä¹ˆ etcd æ€ä¹ˆå®‰è£…ä½¿ç”¨å‘¢ï¼Ÿä¸‹é¢ä¸ºå¸¸ç”¨çš„é›†ç¾¤é…ç½®åŠåŸºæœ¬æ“ä½œã€‚</summary></entry><entry><title type="html">nip.ioåŸŸåçš„ä½¿ç”¨</title><link href="https://kago.site/2017/12/29/nipio/" rel="alternate" type="text/html" title="nip.ioåŸŸåçš„ä½¿ç”¨" /><published>2017-12-29T00:00:00+08:00</published><updated>2017-12-29T00:00:00+08:00</updated><id>https://kago.site/2017/12/29/nipio</id><content type="html" xml:base="https://kago.site/2017/12/29/nipio/">&lt;blockquote&gt;
  &lt;p&gt;æ˜¨å¤©å°æ¯›åŒå­¦å‘Šè¯‰æˆ‘è¯´å‘ç°ä¸€ä¸ªå¾ˆæµå¼Šçš„ä¸œè¥¿å« nip.ioï¼Œå¯ä»¥å‡­åŸŸåè‡ªåŠ¨è§£æä¸º IP åœ°å€ï¼Œæå¤§çš„æ–¹ä¾¿äº† kubernetes ä¸­ ingress éƒ¨åˆ†çš„æµ‹è¯•ã€‚åœ¨ cmd ä¸­è¯•äº†ä¸€ä¸‹è¿˜çœŸæ˜¯å¥½ç”¨ï¼Œè®°å½•ä¸€ä¸‹~&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;å®˜æ–¹ä»‹ç»&quot;&gt;å®˜æ–¹ä»‹ç»&lt;/h3&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NIP.IO

Dead simple wildcard DNS for any IP Address

NIP.IO allows you to map any IP Address in the following DNS wildcard entries:

10.0.0.1.nip.io maps to 10.0.0.1
app.10.0.0.1.nip.io maps to 10.0.0.1
customer1.app.10.0.0.1.nip.io maps to 10.0.0.1
customer2.app.10.0.0.1.nip.io maps to 10.0.0.1
otherapp.10.0.0.1.nip.io maps to 10.0.0.1

NIP.IO maps &amp;lt;anything&amp;gt;.&amp;lt;IP Address&amp;gt;.nip.io to the corresponding &amp;lt;IP Address&amp;gt;, even 127.0.0.1.nip.io maps to 127.0.0.1


This service is a blatant rip-off of xip.io, with one big difference: NIP.IO is powered by PowerDNS with a simple, custom PipeBackend. So, it actually works :) (no messy, custom DNS server here!)

The custom PipeBackend is a single script written in Python and the source can be found on XP-Dev.com.

This is a free service provided by Exentrique Solutions (the same guys who run XP-Dev.com which offers Git, Mercurial and Subversion hosting). The infrastructure runs on a couple of Virtual Machines in the US West Coast and Germany.

Feedback is appreciated, just drop us a mail at info@exentriquesolutions.com or use this web form.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;åŸæ¥ nip.io åƒ xip.io ä¸€æ ·æ˜¯ä¸€ä¸ªæ¬ºéª—æ€§çš„æ˜ å°„ï¼Œå¯ä»¥æ–¹ä¾¿çš„æŠŠ xxx.192.168.1.1.nip.io è¿™æ ·çš„åŸŸåè§£ææˆ 192.168.1.1 ï¼Œåœ¨ web æµ‹è¯•ä¸­ååˆ†æ–¹ä¾¿ã€‚ä¸å¿…é¢‘ç¹åœ°ä¿®æ”¹ DNS æˆ–è€… hosts æ–‡ä»¶å³å¯å®ç°åŸŸåè§£æä¸º IP åœ°å€ï¼Œå°¤å…¶åœ¨ kubernetes ç¯å¢ƒä¸­é…ç½® ingress çš„ hosts éƒ¨åˆ†ã€‚
xip.io å’Œ nip.io è¿˜æœ‰ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œnip.io åç«¯æ˜¯æœ‰ powerDNS ï¼Œæ˜¯å®é™…å‘ç”Ÿäº†è§£ææ“ä½œã€‚&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;æ³¨æ„ï¼šç¦»çº¿æ¨¡å¼ä¸‹ä¸å¯ç”¨å“¦~&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;å®æµ‹&quot;&gt;å®æµ‹&lt;/h3&gt;

&lt;p&gt;ä½¿ç”¨ cmd å¯¹åŸŸåè¿›è¡Œäº†ç®€å•æµ‹è¯•ï¼Œç»“æœå¦‚ä¸‹ï¼š
&lt;img src=&quot;/images/posts/nipio.png&quot; alt=&quot;cmdæµ‹è¯•æˆªå›¾&quot; /&gt;&lt;/p&gt;</content><author><name>Barry New</name></author><summary type="html">æ˜¨å¤©å°æ¯›åŒå­¦å‘Šè¯‰æˆ‘è¯´å‘ç°ä¸€ä¸ªå¾ˆæµå¼Šçš„ä¸œè¥¿å« nip.ioï¼Œå¯ä»¥å‡­åŸŸåè‡ªåŠ¨è§£æä¸º IP åœ°å€ï¼Œæå¤§çš„æ–¹ä¾¿äº† kubernetes ä¸­ ingress éƒ¨åˆ†çš„æµ‹è¯•ã€‚åœ¨ cmd ä¸­è¯•äº†ä¸€ä¸‹è¿˜çœŸæ˜¯å¥½ç”¨ï¼Œè®°å½•ä¸€ä¸‹~</summary></entry><entry><title type="html">jekyllä¸­æ·»åŠ gitmentç•™è¨€æ¿</title><link href="https://kago.site/2017/12/09/gitment/" rel="alternate" type="text/html" title="jekyllä¸­æ·»åŠ gitmentç•™è¨€æ¿" /><published>2017-12-09T00:00:00+08:00</published><updated>2017-12-09T00:00:00+08:00</updated><id>https://kago.site/2017/12/09/gitment</id><content type="html" xml:base="https://kago.site/2017/12/09/gitment/">&lt;h1 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h1&gt;
&lt;p&gt;æœ€è¿‘ä½¿ç”¨jekyllæ­å»ºäº†ä¸ªäººåšå®¢ï¼ˆhttps://kago.siteï¼‰ï¼Œå‚è€ƒç½‘å‹èµ„æ–™ä¸ºåšå®¢æ·»åŠ äº†gitmentä½œä¸ºç•™è¨€æ¿ï¼Œç½—åˆ—ä¸€ä¸‹åŸºæœ¬æ­¥éª¤ï¼Œå¸Œæœ›å¯ä»¥å¸®åˆ°å¤§å®¶ã€‚&lt;/p&gt;

&lt;h1 id=&quot;ç”³è¯·github-oauth-application&quot;&gt;ç”³è¯·Github OAuth Application&lt;/h1&gt;
&lt;p&gt;Githubå¤´åƒä¸‹æ‹‰èœå• &amp;gt; Settings &amp;gt; å·¦è¾¹Developer settingsä¸‹çš„OAuth Apps &amp;gt; New OAuth Appï¼Œå¡«å†™ç›¸å…³ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Application name, Homepage URL, Application description éƒ½å¯ä»¥éšæ„å¡«å†™&lt;/li&gt;
  &lt;li&gt;Authorization callback URL ä¸€å®šè¦å†™è‡ªå·±Github Pagesçš„URL&lt;/li&gt;
  &lt;li&gt;å¡«å†™å®Œä¸Šè¿°ä¿¡æ¯åæŒ‰Register applicationæŒ‰é’®ï¼Œå¾—åˆ°Client IDå’ŒClient Secret&lt;/li&gt;
  &lt;li&gt;è®°å½•Client IDå’ŒClient Secretï¼Œç¨åä¼šç”¨åˆ°&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;åœ¨jekyllæ·»åŠ è°ƒç”¨gitment&quot;&gt;åœ¨jekyllæ·»åŠ è°ƒç”¨gitment&lt;/h1&gt;
&lt;p&gt;åœ¨_layout/ç›®å½•ä¸‹çš„ post.html, æ·»åŠ ä¸€ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;div id=&quot;gitmentContainer&quot;&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;link rel=&quot;stylesheet&quot; href=&quot;https://imsun.github.io/gitment/style/default.css&quot;&amp;gt;
&amp;lt;script src=&quot;https://imsun.github.io/gitment/dist/gitment.browser.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;script&amp;gt;
var gitment = new Gitment({
    owner: 'Your GitHub username',
    repo: 'The repo to store comments',
    oauth: {
        client_id: 'Your client ID',
        client_secret: 'Your client secret',
    },
});
gitment.render('gitmentContainer');
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;éœ€è¦ä¿®æ”¹çš„æœ‰4ä¸ªåœ°æ–¹&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Your GitHub usernameï¼šå¡«å†™ä½ çš„Github Pagesåšå®¢æ‰€åœ¨çš„githubè´¦æˆ·å&lt;/li&gt;
  &lt;li&gt;The repo to store commentsï¼šå¡«å†™ç”¨æ¥å­˜æ”¾è¯„è®ºçš„githubä»“åº“ï¼Œç”±äºè¯„è®ºæ˜¯ é€šè¿‡issuesæ¥å­˜æ”¾çš„ï¼Œä¸ªäººå»ºè®®è¿™é‡Œå¯ä»¥ç›´æ¥å¡«Github Pagesä¸ªäººåšå®¢æ‰€åœ¨çš„ä»“åº“&lt;/li&gt;
  &lt;li&gt;Your client IDï¼šä¸Šä¸€æ­¥æ‰€ç”³è¯·åˆ°çš„åº”ç”¨çš„Client ID&lt;/li&gt;
  &lt;li&gt;Your client secretï¼šä¸Šä¸€æ­¥æ‰€ç”³è¯·åˆ°çš„åº”ç”¨çš„Client Secret&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å¡«å†™å®Œè¿™4é¡¹æŠŠä»£ç pushåˆ°githubã€‚&lt;/p&gt;

&lt;h1 id=&quot;ä¸ºåšå®¢åˆå§‹åŒ–ç•™è¨€æ¿&quot;&gt;ä¸ºåšå®¢åˆå§‹åŒ–ç•™è¨€æ¿&lt;/h1&gt;
&lt;p&gt;gitmentçš„åŸç†æ˜¯ä¸ºæ¯ä¸€éåšæ–‡ä»¥å…¶URLä½œä¸ºæ ‡è¯†åˆ›å»ºä¸€ä¸ªgithub issueï¼Œ å¯¹è¯¥ç¯‡åšå®¢çš„è¯„è®ºå°±æ˜¯å¯¹è¿™ä¸ªissueçš„è¯„è®ºã€‚å› æ­¤ï¼Œéœ€è¦å¯¹åšå®¢åˆå§‹åŒ–ï¼Œ åˆå§‹åŒ–åï¼Œè¯„è®ºä¿¡æ¯ä¼šæ·»åŠ åˆ°githubä¸Šå¯¹åº”çš„issueã€‚&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;ä¸Šä¼ ä»£ç æˆåŠŸåï¼Œåšå®¢æ–‡ç« ä¸‹æ–¹ä¼šå‡ºç°ç•™è¨€æ¿ï¼Œæ˜¾ç¤º&lt;code class=&quot;highlighter-rouge&quot;&gt;Error: Comments Not Initialized&lt;/code&gt;,æç¤ºéœ€è¦åˆå§‹åŒ–&lt;/li&gt;
  &lt;li&gt;ç‚¹å‡»&lt;code class=&quot;highlighter-rouge&quot;&gt;login with github&lt;/code&gt;,ä½¿ç”¨è‡ªå·±githubè´¦å·ç™»å½•ï¼Œé”™è¯¯ä¿¡æ¯ä¼šå˜æˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;Initialize Comments&lt;/code&gt;æŒ‰é’®&lt;/li&gt;
  &lt;li&gt;ç‚¹å‡»æŒ‰é’®ï¼Œå®Œæˆå¯¹åšæ–‡çš„åˆå§‹åŒ–ï¼ŒåŒæ—¶åˆ›å»ºç›¸åº”çš„issue
&lt;img src=&quot;/images/posts/gitment/gitment.png&quot; alt=&quot;gitment&quot; /&gt;&lt;/li&gt;
&lt;/ol&gt;</content><author><name>Barry New</name></author><summary type="html">å‰è¨€ æœ€è¿‘ä½¿ç”¨jekyllæ­å»ºäº†ä¸ªäººåšå®¢ï¼ˆhttps://kago.siteï¼‰ï¼Œå‚è€ƒç½‘å‹èµ„æ–™ä¸ºåšå®¢æ·»åŠ äº†gitmentä½œä¸ºç•™è¨€æ¿ï¼Œç½—åˆ—ä¸€ä¸‹åŸºæœ¬æ­¥éª¤ï¼Œå¸Œæœ›å¯ä»¥å¸®åˆ°å¤§å®¶ã€‚</summary></entry><entry><title type="html">æ²¡æƒ³åˆ°æ˜¯è¿™æ ·çš„â€¦</title><link href="https://kago.site/2017/11/19/mypets/" rel="alternate" type="text/html" title="æ²¡æƒ³åˆ°æ˜¯è¿™æ ·çš„..." /><published>2017-11-19T00:00:00+08:00</published><updated>2017-11-19T00:00:00+08:00</updated><id>https://kago.site/2017/11/19/mypets</id><content type="html" xml:base="https://kago.site/2017/11/19/mypets/">&lt;h3 id=&quot;ç½ªæ¶çš„æºå¤´&quot;&gt;ç½ªæ¶çš„æºå¤´&lt;/h3&gt;

&lt;p&gt;ä¸€åˆ‡åˆ°è¦ä»æ¼«ç”»å®¶&lt;a href=&quot;http://wuhuang-wanshui.lofter.com/&quot;&gt;ç™½èŒ¶&lt;/a&gt;å…»çš„ä¸¤åªâ€œæ˜æ˜Ÿâ€è¯´èµ·ï¼Œä¸€åªå«â€œå¾çš‡â€ï¼Œå¦ä¸€åªå«â€œå·´æ‰é»‘â€&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/wuhuang.jpg&quot; alt=&quot;å¾çš‡&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/bazhahei.jpg&quot; alt=&quot;å·´æ‰é»‘&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åªæ€ªå½“æ—¶å¤ªå¹´è½»ï¼Œä»¥ä¸ºé›†é½äº†å¾çš‡å’Œå·´æ‰é»‘å°±èƒ½å¾—åˆ°æ•´ä¸ªä¸–ç•Œï¼Œç„¶è€Œæ•…äº‹å¥½åƒåç¦»äº†è½¨é“â€¦&lt;/p&gt;

&lt;h3 id=&quot;æˆ‘å¯èƒ½å…»äº†ä¸€åªçŒª&quot;&gt;æˆ‘å¯èƒ½å…»äº†ä¸€åªçŒª&lt;/h3&gt;

&lt;p&gt;è®°å¾—å·´æ‰é»‘æ¥åˆ°å®¶é‡Œçš„æ—¶é—´å¤§æ¦‚æ˜¯ä»Šå¹´çš„8æœˆ15å·ï¼Œæ˜¯å¥³æœ‹å‹é€ç»™æˆ‘çš„ï¼Œåªå› ä¸ºæˆ‘å’Œå¥¹è¯´è¿‡å–œæ¬¢ç™½èŒ¶å…»çš„å·´æ‰é»‘ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å®¶çš„å°å·´å“¥çŠ¬çš„åå­—ä¹Ÿå«æˆäº†å·´æ‰é»‘ï¼Œè§‰å¾—æ›´è´´åˆ‡ä¸€äº›ï¼ˆå…¶å®åªæ˜¯å› ä¸ºæ‡’ï¼‰ã€‚å½“æ—¶è¿™åªå°å·´å“¥çŠ¬æ‰2ä¸ªæœˆå¤šä¸€ç‚¹ï¼Œç‹‚çŠ¬ç–«è‹—è¿˜æ²¡æ¥ç§ï¼Œä½†æ˜¯é˜»æŒ¡ä¸äº†æˆ‘å¯¹å®ƒçš„å–œçˆ±ï¼šæ°´æ±ªæ±ªçš„å¤§çœ¼ç›æ€»æ˜¯åƒåˆ«äººæ¬ å®ƒå¥½å‡ å—éª¨å¤´ä¼¼çš„ã€‚&lt;/p&gt;

&lt;p&gt;è¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šå›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/blog/xiaoshihoudebazhahei.jpg&quot; alt=&quot;å·´æ‰é»‘åˆšæ¥çš„æ—¶å€™&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å·´å“¥çŠ¬åœ¨ç‹—ç•Œæ˜¯å‡ºäº†åçš„è´ªåƒï¼ŒåŠ ä¸Šå®ƒè¿˜æ˜¯åªå¹¼çŠ¬ï¼Œæ¯å¤©åªæƒ³ç€åƒåƒåƒï¼Œè™½ç„¶æ¯å¤©éƒ½åœ¨æ§åˆ¶é£Ÿé‡ï¼Œä½†è¿˜æ˜¯åœ¨ä¸åˆ°ä¸‰ä¸ªæœˆçš„æ—¶é—´ä½“é‡ç”±4æ–¤é£™è‡³11æ–¤ã€‚ç²—å£®çš„ä½“å‹åŠ ä¸Šåƒé¥­æ˜¯å‘å‡ºçš„å£°éŸ³ç¥ä¼¼ä¸€åªå°çŒªâ€¦éš¾æ€ªç»å¸¸è¢«ä¿æ´é˜¿å§¨å”¤ä½œâ€œä½ å®¶é‚£å¤´å°çŒªâ€ã€‚
å·´æ‰é»‘ï¼Œå°±é—®ä½ ç¾ä¸ç¾ï¼ï¼
&lt;img src=&quot;/images/blog/hazhaheishafa.jpg&quot; alt=&quot;èƒ–å­å·´æ‰é»‘&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;æˆ‘æ‰æ˜¯è€å¤§&quot;&gt;æˆ‘æ‰æ˜¯è€å¤§&lt;/h3&gt;

&lt;p&gt;æœ‰äº†å·´æ‰é»‘æ€ä¹ˆèƒ½æ²¡æœ‰å¾çš‡ï¼Œå°±åœ¨ä¸€ä¸ªé˜³å…‰æ˜åªšçš„ä¸‹åˆï¼Œä¸€åªæ©˜çŒ«æ¥åˆ°çš„æˆ‘ä»¬å®¶ã€‚
&lt;img src=&quot;/images/blog/mao.jpg&quot; alt=&quot;è›‹æŒ&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¥³æœ‹å‹ä¸€åªæƒ³å…»åªçŒ«ï¼Œæ—©å…ˆå…»äº†ä¸€åªç¾çŸ­ï¼Œä¸€ä¸ªæ˜ŸæœŸåé€ç»™äº†åŒäº‹ã€‚ä¸ºäº†è¿™äº‹å„¿å¥¹å’Œæˆ‘å¿µå¨äº†å¥½å¤šæ¬¡ï¼Œå°¤å…¶æ˜¯å½“å·´æ‰é»‘åœ¨å®¶é‡Œå¤§å°ä¾¿çš„æ—¶å€™â€¦â€¦&lt;/p&gt;

&lt;p&gt;è›‹æŒï¼Œæ˜¯ä¸€åªæ©˜çŒ«ï¼Œå°±æ˜¯æœ€å¸¸è§çš„å®¶çŒ«ï¼Œä»¥èƒ–é—»åäºçŒ«ç•Œï¼Œè€³è¾¹éšçº¦å“èµ·â€œååªæ©˜çŒ«ä¹åªèƒ–ï¼Œè¿˜æœ‰ä¸€åªå‹å¡Œç‚•â€ã€‚ä¸€ä¸ªæ˜ŸæœŸçš„æ—¶é—´çœŸå¿ƒæ˜¯è§åˆ°äº†ä»€ä¹ˆå«åšèƒ½åƒï¼Œè‚šå­å·²ç»åœ†é¼“é¼“çš„äº†è¿˜åœ¨ä¸åœçš„æ‰¾åƒçš„ã€‚&lt;/p&gt;

&lt;p&gt;æœ€è®©äººæŠ“ç‹‚çš„æ˜¯ï¼Œè¿™ä¸ªå°å®¶ä¼™ä¸å’Œäººäº²çƒ­ï¼Œä¸€å‰¯diaodiaoçš„æ ·å­ï¼Œå“å°±å½“ä½ æ˜¯è€å¤§å§&lt;/p&gt;

&lt;h3 id=&quot;æ¯å¤©ä¸Šæ¼”çŒ«ç‹—å¤§æˆ˜&quot;&gt;æ¯å¤©ä¸Šæ¼”çŒ«ç‹—å¤§æˆ˜&lt;/h3&gt;

&lt;p&gt;æ¯æ¯æƒ³åˆ°å®¢å…çš„æƒ¨çŠ¶çœ¼è§’å°±æ³›èµ·äº†æ³ªèŠ±ï¼Œè¿˜æ˜¯ä¸å†™äº†ï¼Œä¸‡ä¸€å¿ä¸ä½æ¥ä¸ªå·´æ‰é»‘ç‚–è›‹æŒå‘¢â€¦â€¦
&lt;img src=&quot;/images/blog/maogoudazhan.jpg&quot; alt=&quot;çŒ«ç‹—å¤§æˆ˜&quot; /&gt;&lt;/p&gt;</content><author><name>Barry New</name></author><summary type="html">ç½ªæ¶çš„æºå¤´</summary></entry><entry><title type="html">mariadbçš„ä¸»ä»å¤åˆ¶ã€ä¸»ä¸»å¤åˆ¶ã€åŠåŒæ­¥å¤åˆ¶çš„æ¦‚å¿µå’Œæ–¹æ³•</title><link href="https://kago.site/2017/11/19/mariadb-replicate/" rel="alternate" type="text/html" title="mariadbçš„ä¸»ä»å¤åˆ¶ã€ä¸»ä¸»å¤åˆ¶ã€åŠåŒæ­¥å¤åˆ¶çš„æ¦‚å¿µå’Œæ–¹æ³•" /><published>2017-11-19T00:00:00+08:00</published><updated>2017-11-19T00:00:00+08:00</updated><id>https://kago.site/2017/11/19/mariadb-replicate</id><content type="html" xml:base="https://kago.site/2017/11/19/mariadb-replicate/">&lt;p&gt;è¿™ç¯‡æ–‡ç« ä¸»è¦è¯¦ç»†ä»‹ç»äº†mariadbçš„ä¸»ä»å¤åˆ¶ã€ä¸»ä¸»å¤åˆ¶ã€åŠåŒæ­¥å¤åˆ¶çš„æ¦‚å¿µå’Œæ–¹æ³•ã€‚&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;å‚è€ƒ&lt;a href=&quot;http://www.jb51.net/article/97786.htm&quot;&gt;http://www.jb51.net/article/97786.htm&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä¸»ä»æœåŠ¡å™¨çš„æ—¶é—´è¦åŒæ­¥ï¼Œæ•°æ®åº“ç‰ˆæœ¬æœ€å¥½æ˜¯ä¸€è‡´çš„ï¼Œä»¥å…é€ æˆå‡½æ•°å¤„ç†ã€æ—¥å¿—è¯»å–ã€æ—¥å¿—è§£æç­‰å‘ç”Ÿå¼‚å¸¸ã€‚
ä»¥ä¸‹ä¸‰ä¸ªä¸»ä»å¤åˆ¶çš„è®¾ç½®æ˜¯ç‹¬ç«‹çš„ã€‚
æ³¨æ„é˜²ç«å¢™å’Œselinuxçš„å½±å“ã€‚&lt;/p&gt;

&lt;h1 id=&quot;1ç®€å•ä¸»ä»å¤åˆ¶çš„å®ç°&quot;&gt;&lt;strong&gt;1ã€ç®€å•ä¸»ä»å¤åˆ¶çš„å®ç°&lt;/strong&gt;&lt;/h1&gt;

&lt;h2 id=&quot;11-æœåŠ¡å™¨1æ“ä½œ&quot;&gt;1.1 æœåŠ¡å™¨1æ“ä½œ&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;å®‰è£…mariadb-server
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# yum &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; install mariadb-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ç¼–è¾‘/etc/my.cnfæ–‡ä»¶&lt;/p&gt;

    &lt;p&gt;åœ¨[mysqld]æ®µçš„æœ€åæ·»åŠ ä»¥ä¸‹å†…å®¹&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# vim /etc/my.cnf
skip_name_resolve &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
innodb_file_per_table &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON    
server-id &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 1 &lt;span class=&quot;c&quot;&gt;#idå·ä¸èƒ½è·Ÿä»æœåŠ¡å™¨ç›¸åŒ&lt;/span&gt;
log-bin &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; master-log &lt;span class=&quot;c&quot;&gt;#è‡ªå®šä¹‰äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶å&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;æˆæƒå¯ä»¥å¤åˆ¶æœ¬åœ°æ•°æ®åº“ä¿¡æ¯çš„ä¸»æœº
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# systemctl start mariadb.service &lt;span class=&quot;c&quot;&gt;#å¯åŠ¨mariadb server   &lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# mysql
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; grant replication slave,replication client on &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; to &lt;span class=&quot;s1&quot;&gt;'repluser'&lt;/span&gt;@&lt;span class=&quot;s1&quot;&gt;'10.1.51.%'&lt;/span&gt; identified by &lt;span class=&quot;s1&quot;&gt;'replpasswd'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; flush privileges&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;   
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show master status&lt;span class=&quot;se&quot;&gt;\G&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#æŸ¥çœ‹ä¸»æœåŠ¡å™¨çš„çŠ¶æ€ä¿¡æ¯ï¼Œåœ¨ä»æœåŠ¡å™¨ä¸­è¦ç”¨åˆ°&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt; 1. row &lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt;
File: master-log.000003 &lt;span class=&quot;c&quot;&gt;#æ­£åœ¨ä½¿ç”¨çš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶&lt;/span&gt;
Position: 497 &lt;span class=&quot;c&quot;&gt;#æ‰€å¤„çš„ä½ç½®&lt;/span&gt;
Binlog_Do_DB:
Binlog_Ignore_DB:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;12-ä»æœåŠ¡å™¨çš„é…ç½®&quot;&gt;1.2 ä»æœåŠ¡å™¨çš„é…ç½®&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;å®‰è£…mariadb-server
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# yum &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; install mariadb-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ç¼–è¾‘/etc/my.cnfæ–‡ä»¶&lt;/p&gt;

    &lt;p&gt;åœ¨[mysqld]æ®µçš„æœ€åæ·»åŠ ä»¥ä¸‹å†…å®¹&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# vim /etc/my.cnf
skip_name_resolve &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
innodb_file_per_table &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
server-id &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 2 &lt;span class=&quot;c&quot;&gt;#idå·ä¸èƒ½è·Ÿä¸»æœåŠ¡å™¨ç›¸åŒï¼‰&lt;/span&gt;
relay-log &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; slave-log &lt;span class=&quot;c&quot;&gt;#è‡ªå®šä¹‰äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶åï¼‰&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;è®¾ç½®è¦ä»å“ªä¸ªä¸»æœåŠ¡å™¨çš„é‚£ä¸ªä½ç½®å¼€å§‹åŒæ­¥
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# systemctl start mariadb.service
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# mysql
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; change master to &lt;span class=&quot;nv&quot;&gt;master_host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'10.1.51.60'&lt;/span&gt;,master_user&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'repluser'&lt;/span&gt;,master_password&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'replpasswd'&lt;/span&gt;,master_log_file&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'master-log.000003'&lt;/span&gt;,master_log_pos&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;497&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; start slave&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#å¯åŠ¨å¤åˆ¶åŠŸèƒ½&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show slave status&lt;span class=&quot;se&quot;&gt;\G&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#æŸ¥çœ‹ä»æœåŠ¡å™¨çš„çŠ¶æ€ï¼Œä¸‹é¢æ˜¾ç¤ºçš„æ˜¯éƒ¨åˆ†å†…å®¹&lt;/span&gt;
Master_Host: 10.1.51.60
Master_User: repluser
Master_Port: 3306
Connect_Retry: 60
Master_Log_File: master-log.000003
Read_Master_Log_Pos: 497
Relay_Log_File: slave-log.000002
Relay_Log_Pos: 530
Relay_Master_Log_File: master-log.000003
Slave_IO_Running: Yes
Slave_SQL_Running: Yes
Master_Server_Id: 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;13-æµ‹è¯•&quot;&gt;1.3 æµ‹è¯•&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;åœ¨ä¸»æœåŠ¡å™¨å¯¼å…¥äº‹å…ˆå‡†å¤‡å¥½çš„æ•°æ®åº“
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# mysql &amp;lt; hellodb.sql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;åœ¨ä»æœåŠ¡å™¨æŸ¥çœ‹æ˜¯å¦åŒæ­¥
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show databases&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
+--------------------+
| Database   |
+--------------------+
| information_schema |
| hellodb   | &lt;span class=&quot;c&quot;&gt;#æ•°æ®åº“å·²ç»åŒæ­¥&lt;/span&gt;
| mysql    |
| performance_schema |
| &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt;    |
+--------------------+
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; use hellodb&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;hellodb]&amp;gt; show tables&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#hellodbæ•°æ®åº“çš„è¡¨ä¹Ÿæ˜¯åŒæ­¥çš„&lt;/span&gt;
+-------------------+
| Tables_in_hellodb |
+-------------------+
| classes   |
| coc    |
| courses   |
| scores   |
| students   |
| teachers   |
| toc    |
+-------------------+
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;2åŒä¸»å¤åˆ¶çš„å®ç°&quot;&gt;&lt;strong&gt;2ã€åŒä¸»å¤åˆ¶çš„å®ç°&lt;/strong&gt;&lt;/h1&gt;

&lt;h2 id=&quot;21-å®‰è£…mariadb&quot;&gt;2.1 å®‰è£…MariaDB&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;æœåŠ¡å™¨1çš„æ“ä½œï¼š&lt;/li&gt;
&lt;/ul&gt;

&lt;ol&gt;
  &lt;li&gt;å®‰è£…mariadb-server
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# yum &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; install mariadb-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;ç¼–è¾‘/etc/my.cnfæ–‡ä»¶
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# vim /etc/my.cnf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;åœ¨[mysqld]æ®µçš„æœ€åæ·»åŠ ä»¥ä¸‹å†…å®¹&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;skip_name_resolve &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
innodb_file_per_table &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
server-id &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 1 &lt;span class=&quot;c&quot;&gt;#idå·ä¸èƒ½è·Ÿä»æœåŠ¡å™¨ç›¸åŒ&lt;/span&gt;
log-bin &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; master-log &lt;span class=&quot;c&quot;&gt;#è‡ªå®šä¹‰ä¸»æœåŠ¡å™¨çš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶å&lt;/span&gt;
relay-log &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; slave-log &lt;span class=&quot;c&quot;&gt;#è‡ªå®šä¹‰ä»æœåŠ¡å™¨çš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶å&lt;/span&gt;
auto_increment_offset &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 1 
auto_increment_increment &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;å¯åŠ¨æœåŠ¡
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# systemctl start mariadb.service	
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]#systemctl &lt;span class=&quot;nb&quot;&gt;enable &lt;/span&gt;mariadb.servic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;em&gt;æœåŠ¡å™¨2çš„æ“ä½œï¼š&lt;/em&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;å®‰è£…mariadb-server
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# yum &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; install mariadb-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;ç¼–è¾‘/etc/my.cnfæ–‡ä»¶
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# vim /etc/my.cnf
skip_name_resolve &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
innodb_file_per_table &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
server-id &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 2
relay-log &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; slave-log
lob-bin &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; master-log
auto_increment_offset &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 2 
auto_increment_increment &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;å¯åŠ¨æœåŠ¡
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# systemctl start mariadb.service	
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]#systemctl &lt;span class=&quot;nb&quot;&gt;enable &lt;/span&gt;mariadb.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;22-é…ç½®åŒä¸»å¤åˆ¶&quot;&gt;2.2 é…ç½®åŒä¸»å¤åˆ¶&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;åœ¨æœåŠ¡å™¨2ä¸ŠæŸ¥çœ‹çš„masterçŠ¶æ€&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;em&gt;è¯´æ˜ï¼šè®°å½•æ•°æ®ï¼Œåœ¨æœåŠ¡å™¨2ä¸Šé…ç½®æ—¶ä¼šç”¨åˆ°ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show master status&lt;span class=&quot;se&quot;&gt;\G&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt; 1. row &lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt;
File: master-log.000003
Position: 521
Binlog_Do_DB:
Binlog_Ignore_DB:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;æœåŠ¡å™¨1ä¸Šè¿›è¡Œå¦‚ä¸‹é…ç½®&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;em&gt;è¯´æ˜ï¼šä»¥ä¸‹é…ç½®çš„å†…å®¹ä¸ºæœåŠ¡å™¨2çš„IPåŠæœåŠ¡å™¨2ä¸ŠæŸ¥åˆ°çš„masteræ•°æ®ã€‚&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# mysql
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; grant replication slave,replication client on &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; to &lt;span class=&quot;s1&quot;&gt;'repluser'&lt;/span&gt;@&lt;span class=&quot;s1&quot;&gt;'192.168.1.%'&lt;/span&gt; identified by &lt;span class=&quot;s1&quot;&gt;'replpasswd'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; change master to &lt;span class=&quot;nv&quot;&gt;master_host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'192.168.1.188'&lt;/span&gt;,master_user&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'repluser'&lt;/span&gt;,master_password&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'replpasswd'&lt;/span&gt;,master_log_file&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'master-log.000003'&lt;/span&gt;,master_log_pos&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;521&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; start slave&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; SHOW SLAVE STATUS&lt;span class=&quot;se&quot;&gt;\G&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt; 1. row &lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt;
              Slave_IO_State: Waiting &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;master to send event
                  Master_Host: 192.168.1.188
                  Master_User: repluser
                  Master_Port: 3306
                Connect_Retry: 60
              Master_Log_File: master-log.000003
          Read_Master_Log_Pos: 521
              Relay_Log_File: slave-log.000002
                Relay_Log_Pos: 806
        Relay_Master_Log_File: master-log.000003
            Slave_IO_Running: Yes
            Slave_SQL_Running: Yes
              Replicate_Do_DB:
          Replicate_Ignore_DB:
          Replicate_Do_Table:
      Replicate_Ignore_Table:
      Replicate_Wild_Do_Table:
  Replicate_Wild_Ignore_Table:
                  Last_Errno: 0
                  Last_Error:
                Skip_Counter: 0
          Exec_Master_Log_Pos: 521
              Relay_Log_Space: 1094
              Until_Condition: None
              Until_Log_File:
                Until_Log_Pos: 0
          Master_SSL_Allowed: No
          Master_SSL_CA_File:
          Master_SSL_CA_Path:
              Master_SSL_Cert:
            Master_SSL_Cipher:
              Master_SSL_Key:
        Seconds_Behind_Master: 0
Master_SSL_Verify_Server_Cert: No
                Last_IO_Errno: 0
                Last_IO_Error:
              Last_SQL_Errno: 0
              Last_SQL_Error:
  Replicate_Ignore_Server_Ids:
            Master_Server_Id: 2
1 row &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.00 sec&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;åœ¨æœåŠ¡å™¨1æŸ¥çœ‹masterçŠ¶æ€
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show master status&lt;span class=&quot;se&quot;&gt;\G&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt; 1. row &lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt;
File: master-log.000003
Position: 795
Binlog_Do_DB: 
Binlog_Ignore_DB:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;æœåŠ¡å™¨2ä¸Šè¿›è¡Œå¦‚ä¸‹é…ç½®&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;em&gt;è¯´æ˜ï¼šä»¥ä¸‹çš„é…ç½®å†…å®¹ä¸ºæœåŠ¡å™¨1çš„IPåŠæœåŠ¡å™¨1ä¸­æŸ¥åˆ°çš„masterä¿¡æ¯&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# mysql
 MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; grant replication slave,replication client on &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; to &lt;span class=&quot;s1&quot;&gt;'repluser'&lt;/span&gt;@&lt;span class=&quot;s1&quot;&gt;'192.168.1.%'&lt;/span&gt; identified by &lt;span class=&quot;s1&quot;&gt;'replpasswd'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; change master to &lt;span class=&quot;nv&quot;&gt;master_host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'192.168.1.187'&lt;/span&gt;,master_user&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'repluser'&lt;/span&gt;,master_password&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'replpasswd'&lt;/span&gt;,master_log_file&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'master-log.000003'&lt;/span&gt;,master_log_pos&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;795&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; start slave&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show slave status&lt;span class=&quot;se&quot;&gt;\G&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt; 1. row &lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt;
              Slave_IO_State: Waiting &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;master to send event
                  Master_Host: 192.168.1.187
                  Master_User: repluser
                  Master_Port: 3306
                Connect_Retry: 60
              Master_Log_File: master-log.000003
          Read_Master_Log_Pos: 795
              Relay_Log_File: slave-log.000002
                Relay_Log_Pos: 530
        Relay_Master_Log_File: master-log.000003
            Slave_IO_Running: Yes
            Slave_SQL_Running: Yes
              Replicate_Do_DB:
          Replicate_Ignore_DB:
          Replicate_Do_Table:
      Replicate_Ignore_Table:
      Replicate_Wild_Do_Table:
  Replicate_Wild_Ignore_Table:
                  Last_Errno: 0
                  Last_Error:
                Skip_Counter: 0
          Exec_Master_Log_Pos: 795
              Relay_Log_Space: 818
              Until_Condition: None
              Until_Log_File:
                Until_Log_Pos: 0
          Master_SSL_Allowed: No
          Master_SSL_CA_File:
          Master_SSL_CA_Path:
              Master_SSL_Cert:
            Master_SSL_Cipher:
              Master_SSL_Key:
        Seconds_Behind_Master: 0
Master_SSL_Verify_Server_Cert: No
                Last_IO_Errno: 0
                Last_IO_Error:
              Last_SQL_Errno: 0
              Last_SQL_Error:
  Replicate_Ignore_Server_Ids:
            Master_Server_Id: 1
1 row &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.00 sec&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;23-æµ‹è¯•&quot;&gt;2.3 æµ‹è¯•&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;åœ¨ä»»æ„ä¸€å°æœåŠ¡å™¨ä¸Šåˆ›å»ºmydbæ•°æ®åº“
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; create database mydb&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;åœ¨å¦ä¸€å°æœåŠ¡å™¨ä¸ŠæŸ¥çœ‹
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show databases&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
+--------------------+
| Database   |
+--------------------+
| information_schema |
| mydb    |
| mysql    |
| performance_schema |
| &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt;    |
+--------------------+
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;3åŠåŒæ­¥å¤åˆ¶çš„å®ç°&quot;&gt;&lt;strong&gt;3ã€åŠåŒæ­¥å¤åˆ¶çš„å®ç°&lt;/strong&gt;&lt;/h1&gt;

&lt;h2 id=&quot;31-åœ¨ä¸»æœåŠ¡å™¨ä¸Šçš„é…ç½®&quot;&gt;3.1 åœ¨ä¸»æœåŠ¡å™¨ä¸Šçš„é…ç½®&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;å®‰è£…mariadb-server
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# yum &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; install mariadb-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;ç¼–è¾‘/etc/my.cnf
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# vim /etc/my.cnf
 skip_name_resolve &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
 innodb_file_per_table &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
 server-id &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 1
 log-bin &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; master-log
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;æˆæƒå¯ä»¥å¤åˆ¶æœ¬åœ°æ•°æ®åº“ä¿¡æ¯çš„ä¸»æœº&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# systemctl start mariadb.service &lt;span class=&quot;c&quot;&gt;#å¯åŠ¨mariadb server&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# mysql
 MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; grant replication slave,replication client on &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; to &lt;span class=&quot;s1&quot;&gt;'repluser'&lt;/span&gt;@&lt;span class=&quot;s1&quot;&gt;'10.1.51.%'&lt;/span&gt; identified by &lt;span class=&quot;s1&quot;&gt;'replpasswd'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; flush privileges&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show master status&lt;span class=&quot;se&quot;&gt;\G&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#æŸ¥çœ‹ä¸»æœåŠ¡å™¨çš„çŠ¶æ€ä¿¡æ¯ï¼Œåœ¨ä»æœåŠ¡å™¨ä¸­è¦ç”¨åˆ°&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt; 1. row &lt;span class=&quot;k&quot;&gt;***************************&lt;/span&gt;
File: master-log.000003 &lt;span class=&quot;c&quot;&gt;#æ­£åœ¨ä½¿ç”¨çš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶&lt;/span&gt;
Position: 245 &lt;span class=&quot;c&quot;&gt;#æ‰€å¤„çš„ä½ç½®&lt;/span&gt;
Binlog_Do_DB:
Binlog_Ignore_DB:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;å®‰è£…rpl semi sync_masteræ’ä»¶ï¼Œå¹¶å¯ç”¨
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# mysql
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; install plugin rpl_semi_sync_master soname &lt;span class=&quot;s1&quot;&gt;'semisync_master.so'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;global rpl_semi_sync_master_enabled &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show plugins&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;#å¯æŸ¥çœ‹æ’ä»¶æ˜¯å¦æ¿€æ´»&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show global variables like &lt;span class=&quot;s1&quot;&gt;'rpl_semi%'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;#å¯æŸ¥çœ‹å®‰è£…çš„æ’ä»¶æ˜¯å¦å¯ç”¨&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show global status like &lt;span class=&quot;s1&quot;&gt;'%semi%'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;#å¯æŸ¥çœ‹ä»æœåŠ¡å™¨çš„ä¸ªæ•°ï¼Œæ­¤æ—¶æ˜¯0ä¸ª&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;32ä»æœåŠ¡å™¨çš„é…ç½®&quot;&gt;3.2ä»æœåŠ¡å™¨çš„é…ç½®&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;å®‰è£…mariadb-server
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# yum &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; install mariadb-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;ç¼–è¾‘/etc/my.cnfæ–‡ä»¶
åœ¨[mysqld]æ®µçš„æœ€åæ·»åŠ ä»¥ä¸‹å†…å®¹
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# vim /etc/my.cnf
skip_name_resolve &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
innodb_file_per_table &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
server-id &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 2 &lt;span class=&quot;c&quot;&gt;#idå·ä¸èƒ½è·Ÿä¸»æœåŠ¡å™¨ç›¸åŒ&lt;/span&gt;
relay-log &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; slave-log &lt;span class=&quot;c&quot;&gt;#è‡ªå®šä¹‰äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶å&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;è®¾ç½®è¦ä»å“ªä¸ªä¸»æœåŠ¡å™¨çš„é‚£ä¸ªä½ç½®å¼€å§‹åŒæ­¥
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# systemctl start mariadb.service 
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# mysql 
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; change master to &lt;span class=&quot;nv&quot;&gt;master_host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'10.1.51.60'&lt;/span&gt;,master_user&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'repluser'&lt;/span&gt;,master_password&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'replpasswd'&lt;/span&gt;,master_log_file&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'master-log.000003'&lt;/span&gt;,master_log_pos&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;245&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;å®‰è£…rpl semi sync_slaveæ’ä»¶å¹¶å¯ç”¨
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# mysql 
 MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; install plugin rpl_semi_sync_slave soname &lt;span class=&quot;s1&quot;&gt;'semisync_slave.so'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;global rpl_semi_sync_slave_enabled &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; start slave&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å®Œæˆä¸Šé¢é…ç½®åï¼Œå¯ä»¥åœ¨ä¸»æœåŠ¡å™¨ä¸ŠæŸ¥çœ‹åŠåŒæ­¥å¤åˆ¶çš„ç›¸å…³ä¿¡æ¯ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show global status like &lt;span class=&quot;s1&quot;&gt;'%semi%'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
Rpl_semi_sync_master_clients 1 &lt;span class=&quot;c&quot;&gt;#ä»æœåŠ¡å™¨æœ‰ä¸€å°&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;33-æµ‹è¯•&quot;&gt;3.3 æµ‹è¯•&lt;/h3&gt;

&lt;p&gt;æµ‹è¯•ä»¥ä¸ªäººå®é™…æƒ…å†µè€Œå®š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;åœ¨ä¸»æœåŠ¡å™¨ä¸Šå¯¼å…¥äº‹å…ˆå‡†å¤‡å¥½çš„æ•°æ®åº“hellodb.sql
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;hellodb]&amp;gt; &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt; /root/hellodb.sql&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;åœ¨ä¸»æœåŠ¡å™¨ä¸ŠæŸ¥çœ‹åŠåŒæ­¥å¤åˆ¶çš„çŠ¶æ€&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;hellodb]&amp;gt; show master status&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
+-------------------+----------+--------------+------------------+
| File    | Position | Binlog_Do_DB | Binlog_Ignore_DB |
+-------------------+----------+--------------+------------------+
| master-log.000003 |  8102 |    |     |
+-------------------+----------+--------------+------------------+ 
MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;hellodb]&amp;gt; show global status like &lt;span class=&quot;s1&quot;&gt;'%semi%'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
+--------------------------------------------+-------+
| Variable_name        | Value |
+--------------------------------------------+-------+
| Rpl_semi_sync_master_clients    | 1  |
| Rpl_semi_sync_master_net_avg_wait_time  | 1684 |
| Rpl_semi_sync_master_net_wait_time   | 60630 |
| Rpl_semi_sync_master_net_waits    | 36 |
| Rpl_semi_sync_master_no_times    | 1  |
| Rpl_semi_sync_master_no_tx     | 1  |
| Rpl_semi_sync_master_status    | ON |
| Rpl_semi_sync_master_timefunc_failures  | 0  |
| Rpl_semi_sync_master_tx_avg_wait_time  | 1884 |
| Rpl_semi_sync_master_tx_wait_time   | 65965 |
| Rpl_semi_sync_master_tx_waits    | 35 |
| Rpl_semi_sync_master_wait_pos_backtraverse | 0  |
| Rpl_semi_sync_master_wait_sessions   | 0  |
| Rpl_semi_sync_master_yes_tx    | 35 |
+--------------------------------------------+-------+
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;åœ¨ä»æœåŠ¡å™¨ä¸ŠæŸ¥çœ‹æ˜¯å¦åŒæ­¥
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show databases&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; use hellodb&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;hellodb]&amp;gt; &lt;span class=&quot;k&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; from students&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;4-è¡¥å……&quot;&gt;&lt;strong&gt;4 è¡¥å……ï¼š&lt;/strong&gt;&lt;/h1&gt;

&lt;p&gt;åŸºäºä¸Šé¢çš„åŠåŒæ­¥å¤åˆ¶é…ç½®å¤åˆ¶çš„è¿‡æ»¤å™¨ï¼Œå¤åˆ¶è¿‡æ»¤æœ€å¥½åœ¨ä»æœåŠ¡å™¨ä¸Šè®¾ç½®ï¼Œæ­¥éª¤å¦‚ä¸‹&lt;/p&gt;

&lt;h2 id=&quot;41-ä»æœåŠ¡å™¨çš„é…ç½®&quot;&gt;4.1 ä»æœåŠ¡å™¨çš„é…ç½®&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;å…³é—­mariadb server
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# systemctl stop mariadb.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;ç¼–è¾‘/etc/my.cnfæ–‡ä»¶
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# vim /etc/my.cnf
skip_name_resolve &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
innodb_file_per_table &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON
server-id &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 2
relay-log &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; slave-log
replicate-do-db &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; mydb &lt;span class=&quot;c&quot;&gt;#åªå¤åˆ¶mydbæ•°æ®åº“çš„å†…å®¹&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è¡¥å……ï¼šå¸¸ç”¨çš„è¿‡æ»¤é€‰é¡¹å¦‚ä¸‹&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;Replicate_Do_DB&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;Replicate_Ignore_DB&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;Replicate_Do_Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;Replicate_Ignore_Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;Replicate_Wild_Do_Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;Replicate_Wild_Ignore_Table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;é‡å¯mariadb server
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;root@localhost ~]# systemctl start mariadb.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;é‡å¯mariadb serveråï¼ŒåŠåŒæ­¥å¤åˆ¶åŠŸèƒ½å°†è¢«å…³é—­ï¼Œå› æ­¤è¦é‡æ–°å¯åŠ¨&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; show global variables like &lt;span class=&quot;s1&quot;&gt;'%semi%'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
+---------------------------------+-------+
| Variable_name     | Value |
+---------------------------------+-------+
| rpl_semi_sync_slave_enabled  | OFF |
| rpl_semi_sync_slave_trace_level | 32 |
+---------------------------------+-------+
 
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;global rpl_semi_sync_slave_enabled &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ON&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; stop slave&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;#éœ€å…ˆå…³é—­ä»æœåŠ¡å™¨å¤åˆ¶åŠŸèƒ½å†é‡å¯&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; start slave&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;42æµ‹è¯•&quot;&gt;4.2æµ‹è¯•&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;ä¸»æœåŠ¡å™¨ä¸Šçš„hellodbæ•°æ®åº“åˆ›å»ºä¸€ä¸ªæ–°è¡¨semitable
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;hellodb]&amp;gt; create table semitable &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;id int&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;åœ¨ä»æœåŠ¡å™¨ä¸ŠæŸ¥çœ‹hellodbæ•°æ®åº“æ˜¯å¦æœ‰semitable
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)]&amp;gt;&lt;/span&gt; use hellodb
MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;hellodb]&amp;gt; show tables&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;ï¼ˆå¹¶æ²¡æœ‰ï¼‰
+-------------------+
| Tables_in_hellodb |
+-------------------+
| classes   |
| coc    |
| courses   |
| scores   |
| students   |
| teachers   |
| toc    |
+-------------------+
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;åœ¨ä¸»æœåŠ¡å™¨ä¸Šåˆ›å»ºmydbæ•°æ®åº“ï¼Œå¹¶ä¸ºå…¶åˆ›å»ºä¸€ä¸ªtbl1è¡¨
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;hellodb]&amp;gt; create database mydb&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;åœ¨ä»æœåŠ¡å™¨ä¸ŠæŸ¥çœ‹mydbæ•°æ®åº“çš„æ˜¯å¦æœ‰tbl1è¡¨
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;hellodb]&amp;gt; use mydb&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
MariaDB &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;mydb]&amp;gt; show tables&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; ï¼ˆå¯ä»¥æŸ¥çœ‹åˆ°ï¼‰
+----------------+
| Tables_in_mydb |
+----------------+
| tbl1   |
+----------------+
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;</content><author><name>Barry New</name></author><summary type="html">è¿™ç¯‡æ–‡ç« ä¸»è¦è¯¦ç»†ä»‹ç»äº†mariadbçš„ä¸»ä»å¤åˆ¶ã€ä¸»ä¸»å¤åˆ¶ã€åŠåŒæ­¥å¤åˆ¶çš„æ¦‚å¿µå’Œæ–¹æ³•ã€‚ å‚è€ƒhttp://www.jb51.net/article/97786.htm</summary></entry><entry><title type="html">åˆå°</title><link href="https://kago.site/2017/11/17/first-blog/" rel="alternate" type="text/html" title="åˆå°" /><published>2017-11-17T00:00:00+08:00</published><updated>2017-11-17T00:00:00+08:00</updated><id>https://kago.site/2017/11/17/first-blog</id><content type="html" xml:base="https://kago.site/2017/11/17/first-blog/">&lt;h2 id=&quot;æˆ‘æ˜¯æ ‡é¢˜&quot;&gt;æˆ‘æ˜¯æ ‡é¢˜&lt;/h2&gt;

&lt;p&gt;æˆ‘æ˜¯æ­£æ–‡~&lt;/p&gt;</content><author><name>Barry New</name></author><summary type="html">æˆ‘æ˜¯æ ‡é¢˜</summary></entry></feed>